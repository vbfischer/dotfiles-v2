(()=>{var e,t={86961:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}},97906:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{ABORT_LOGIN_TYPE_ACCOUNTS:()=>R,ACCOUNTS_METHODS:()=>M,LOADING:()=>A,LOGIN_BEFORE:()=>C,LOGIN_CLEAR_ERRORS:()=>F,LOGIN_FAIL:()=>P,LOGIN_SUCCESS:()=>x,LOGIN_TYPE_ACCOUNTS:()=>N,LOGIN_TYPE_AUTOLOGIN:()=>I,LOGIN_TYPE_EMAIL:()=>T,UTM_PARAMETERS:()=>j,abortLoginWithAccounts:()=>H,fetchUTMParameters:()=>K,loading:()=>B,login:()=>W,loginClearErrors:()=>z,loginFailed:()=>U,loginSuccess:()=>L,loginWithAccounts:()=>V,receivedUTMParameters:()=>Y});var o={};n.r(o),n.d(o,{ENTER_LOGIN_MODE:()=>Q,ENTER_SETTINGS_MODE:()=>te,ENTER_SIGNUP_MODE:()=>J,ENTER_SIGNUP_MODE_STEP_0:()=>X,ENTER_SIGNUP_MODE_STEP_1:()=>$,ENTER_WELCOME_MODE:()=>ee,INTERACTION:()=>ne,START_APP:()=>q,enterLoginMode:()=>se,enterSettingsMode:()=>ce,enterSignupMode:()=>oe,enterSignupModeStep0:()=>ie,enterSignupModeStep1:()=>ae,enterWelcomeMode:()=>ue,interaction:()=>de,openSignupPage:()=>le,startApp:()=>re});var i={};n.r(i),n.d(i,{CLEAR_ALL_ERRORS:()=>Ue,COUNTRY_NOT_LAUNCHED:()=>Le,FACEBOOK_SIGNUP_ATTEMPT:()=>je,FACEBOOK_SIGNUP_FAILURE:()=>Ie,FACEBOOK_SIGNUP_SUCCESS:()=>Te,SIGNUP_ATTEMPT:()=>Fe,SIGNUP_FAILURE:()=>Pe,SIGNUP_RESTRICTIONS_FAILURE:()=>xe,SIGNUP_RESTRICTIONS_SUCCESS:()=>Ce,SIGNUP_SUCCESS:()=>Ae,UPDATE_SIGNUP_DATA:()=>Ze,VALIDATE_FIELD_ATTEMPT:()=>Ne,VALIDATE_FIELD_FAILURE:()=>Re,VALIDATE_FIELD_SUCCESS:()=>Me,clearAllErrors:()=>it,countryNotLaunched:()=>ot,facebookSignup:()=>Xe,facebookSignupFailure:()=>Qe,facebookSignupSuccess:()=>$e,getSignupRestrictions:()=>Be,signup:()=>Ve,signupAttempt:()=>Ke,signupFailure:()=>ze,signupRestrictionsFailure:()=>We,signupRestrictionsSuccess:()=>Ge,signupSuccess:()=>Ye,signupWithAccounts:()=>Je,updateSignupData:()=>rt,validateField:()=>He,validateFieldAttempt:()=>et,validateFieldFailure:()=>tt,validateFieldSuccess:()=>nt});var a={};n.r(a),n.d(a,{SETTINGS_FETCH_PROXY_SETTINGS_FAILURE:()=>At,SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS:()=>Pt,SETTINGS_RESTART_CLIENT_FAILURE:()=>Nt,SETTINGS_RESTART_CLIENT_SUCCESS:()=>It,SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE:()=>Tt,SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS:()=>jt,fetchProxySettings:()=>Rt,restartClient:()=>Zt,updateProxySettings:()=>Mt});var s=n(24255),u=n(88769),c=n(26533),l=n.n(c),d=(n(93019),n(84196),n(43316),n(73630),n(3761),n(30169),n(60002),n(95160),n(77410),n(57782),n(75684),n(719),n(87995)),p=n(3742),f=n(77646),h=n(43489),g=n(20385);n(79075),n(26870),n(33208),n(86978),n(98618),n(40905),n(79410),n(21105),n(72753),n(73566),n(3726),n(6717);const v=function(e){return n.g&&"function"==typeof n.g._getSpotifyModule?new Promise((function(t,r){n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:r})})):null},m=window.localStorage;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _="lastUsername",E="THIS_USER_DOES_NOT_EXIST_AND_IS_A_PLACEHOLDER",k="utmParameters",S=m.getItem(k),D=m.getItem(_),w={errorData:null,loginInProgress:!1,redirectTo:null,username:D!==E?D:"",utmParameters:S?JSON.parse(S):null};const O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Bt.LOADING:return b(b({},e),{},{loading:!0,throbberDelay:t.throbberDelay});case Bt.LOGIN_FAIL:return b(b({},e),{},{loading:!1,errorData:t.errorData,loggedIn:!1,loginInProgress:!1});case Bt.LOGIN_BEFORE:return b(b({},e),{},{errorData:t.errorData,loggedIn:!1,loginInProgress:t.loginInProgress,username:t.username});case Bt.LOGIN_SUCCESS:return b(b({},e),{},{loading:!1,loggedIn:!0,redirectDelay:t.redirectDelay||0,redirectTo:t.redirectTo,username:t.username});case Bt.UTM_PARAMETERS:return b(b({},e),{},{utmParameters:t.utmParameters});case Bt.LOGIN_CLEAR_ERRORS:return b(b({},e),{},{errorData:null});default:return e}};var C="LOGIN_BEFORE",x="LOGIN_SUCCESS",F="LOGIN_CLEAR_ERRORS",P="LOGIN_FAIL",A="LOADING",j="UTM_PARAMETERS",T="login",I="autologin",N="login-accounts",R="abort-login-accounts",M={facebook:"facebook",apple:"apple",google:"google"};function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:C,errorData:null,username:e||"",loginInProgress:t===T,loginType:t}}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return{type:x,errorData:null,redirectTo:o,redirectDelay:t||0,username:e,loginType:n,afterSignup:r}}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:P,errorData:e,loginType:t}}function B(e){return{type:A,throbberDelay:e&&e.throbberDelay?e.throbberDelay:0}}var G=function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o,i,a,s,u,c,d,p,f,h,g,m=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>2&&void 0!==m[2]?m[2]:{},o=r.defaultErrorCode,i=r.redirectDelay,a=void 0===i?0:i,s=m.length>3&&void 0!==m[3]?m[3]:T,u=m.length>4&&void 0!==m[4]&&m[4],c=m.length>5&&void 0!==m[5]?m[5]:null,d=!(m.length>6&&void 0!==m[6])||m[6],c&&(n.args=n.args||[],n.args[0]=n.args[0]||{},n.args[0].actionHash=c),e.prev=6,e.t0=JSON,e.next=10,v(n);case 10:e.t1=e.sent,p=e.t0.parse.call(e.t0,e.t1),f=p.redirectTo||"xpui",h=null,n&&n.args&&n.args[0]&&(h=n.args[0].username),t(L(d?h:E,a,s,u,f)),e.next=23;break;case 18:e.prev=18,e.t2=e.catch(6),g=e.t2,o?g={errorCode:o}:"string"==typeof e.t2&&(g=JSON.parse(e.t2)),t(U(g,s));case 23:case"end":return e.stop()}}),e,null,[[6,18]])})));return function(t,n){return e.apply(this,arguments)}}();function W(e){var t=e.username,n=e.password,r=e.rememberMe,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e){var a=o?I:T;e(Z(r?t:E,a)),G(e,{name:T,args:[{username:t,password:n,rememberMe:r}]},{redirectDelay:200},a,o,i,r)}}function V(e,t){return function(n){n(Z(null,N)),G(n,{name:N,args:[{method:e,enableSignup:!1}]},{redirectDelay:200},N,!1,t)}}function H(){return(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({name:R,args:[]});case 2:case"end":return e.stop()}}),e)})))}function K(){return function(){var e=(0,u.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"get-signup-utm-parameters",args:[]},e.t0=t,e.t1=Y,e.t2=JSON,e.next=6,v(n);case 6:e.t3=e.sent,e.t4=e.t2.parse.call(e.t2,e.t3),e.t5=(0,e.t1)(e.t4),(0,e.t0)(e.t5);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Y(e){return{type:j,utmParameters:e}}function z(){return{type:F}}var q="START_APP",J="ENTER_SIGNUP_MODE",X="ENTER_SIGNUP_MODE_STEP_0",$="ENTER_SIGNUP_MODE_STEP_1",Q="ENTER_LOGIN_MODE",ee="ENTER_WELCOME_MODE",te="ENTER_SETTINGS_MODE",ne="INTERACTION";function re(){return{type:q}}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:J,actionHash:e}}function ie(){return{type:X}}function ae(){return{type:$}}function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:Q,actionHash:e}}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:ee,errorMessage:e}}function ce(){return{type:te}}function le(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(){var t=(0,u.Z)(l().mark((function t(n,r){var o,i,a,s,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o={},a=e?"website":"desktop-app",t.t0=a,t.next="desktop-app"===t.t0?5:"website"===t.t0?7:16;break;case 5:return n(oe()),t.abrupt("break",17);case 7:return t.next=9,n(K());case 9:return s=r(),o=s.login.utmParameters||{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},u=Object.keys(o).reduce((function(e,t){return e[t]=encodeURIComponent(o[t]),e}),{}),i="https://www.spotify.com/signup?utm_source=".concat(u.utm_source,"&utm_medium=").concat(u.utm_medium,"&utm_campaign=").concat(u.utm_campaign),u.referral&&(i+="&referral=".concat(u.referral,"&referrer=").concat(u.referral)),window.open(i),t.abrupt("break",17);case 16:return t.abrupt("break",17);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function de(e,t,n,r,o){return{type:ne,page:e,interactionType:t,intent:n,itemId:r,actionHash:o}}var pe=n(87906),fe=n(39061),he=(n(85675),n(95410),n(15970),n(40163),n(27586),n(56110),n(66608),n(98372),n(25750),n(78390),n(68961)),ge=n.n(he),ve=["errors"];function me(){var e="undefined"!=typeof window&&window.__spotify&&window.__spotify.DESKTOP_SIGNUP_DEBUG_KEY;return e||"4c7a36d5260abca4af282779720cf631"}function ye(){var e="undefined"!=typeof window&&window.__spotify&&window.__spotify.client_version||"";if(!e)throw new Error("Missing Spotify App Version! Something is wrong: talk to #desktop-squad.");return["Spotify-App-Version",e]}function be(){var e="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"",t="";if(-1!==e.indexOf("Mac")?t="OSX":-1!==e.indexOf("Win")?t="Win32":-1!==e.indexOf("Linux")&&(t="Linux"),!t)throw new Error("Missing App Platform! Something is wrong: talk to #desktop-squad.");return["App-Platform",t]}function _e(e){var t,n,r=new Map(Object.entries(e).sort()),o=(t=r,n=ge().create(),t.forEach((function(e){void 0!==e&&n.update(e.toString())})),n.hex());if(r.size>o.length)return r;var i=(0,fe.Z)(r),a=(0,fe.Z)(Array(r.size).keys()).sort((function(e,t){var n=o.charAt(e).localeCompare(o.charAt(t));return 0!==n?n:i[e][0].localeCompare(i[t][0])})),s=new Map;return a.forEach((function(e){s.set(i[e][0],i[e][1])})),s}function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.email,r=e.password,o=e.gender,i=e.birthDate,a=void 0===i?{}:i,s=e.sendEmail,u=e.shareData,c=e.agreeEula,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},d=arguments.length>2&&void 0!==arguments[2]&&arguments[2],p=Object.keys(l).reduce((function(e,t){return e[t]=encodeURIComponent(l[t]),e}),{}),f="https://login.app.spotify.com?utm_source=".concat(p.utm_source,"&utm_medium=").concat(p.utm_medium,"&utm_campaign=").concat(p.utm_campaign);p.referral&&(f+="&referral=".concat(p.referral,"&referrer=").concat(p.referral));var h={key:me(),displayname:t,email:n,password:r,password_repeat:r,gender:o,birth_year:a.year,birth_month:a.month,birth_day:a.day,iagree:c?1:0,creation_point:f,creation_flow:"desktop",platform:"desktop",referrer:p.referral};return"boolean"==typeof s&&(h["send-email"]=s),"boolean"==typeof u&&(h.thirdpartyemail=u),d&&Object.keys(h).forEach((function(e){void 0===h[e]&&delete h[e]})),_e(h)}var ke=function(e,t){var n=e.headers.get("content-type");e.headers.set("content-type",function(e,t){return[].concat((0,fe.Z)(e.split(";")),[t]).join(";")}(n,t))},Se=function(e){return function(){var t=(0,u.Z)(l().mark((function t(n,r,o){var i,a,s,u,c,d,p,f,h;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Ee(n,r,o),a=new FormData,i.forEach((function(e,t){a.append(t,e)})),s=[ye(),be()].reduce((function(e,t){return e[t[0]]=t[1],e}),{}),u={method:"POST",body:a,headers:{"App-Platform":s["App-Platform"],"Spotify-App-Version":s["Spotify-App-Version"],"X-Client-Id":{}.SPOTIFY_CLIENT_ID}},c=new Request(e,u),ke(c,"charset=utf-8"),t.next=9,fetch(c);case 9:return d=t.sent,t.next=12,d.json();case 12:if(t.t0=t.sent,t.t0){t.next=15;break}t.t0={};case 15:if(p=t.t0,f=p.errors,h=(0,pe.Z)(p,ve),!f){t.next=20;break}throw f;case 20:return t.abrupt("return",h);case 21:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},De=Se("https://spclient.wg.spotify.com/signup/public/v1/account/"),we=Se("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=true"),Oe=function(){var e=(0,u.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=1");case 2:return t=e.sent,e.next=5,t.json();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:if(!((n=e.t0).errors&&n.errors.length>0)){e.next=11;break}throw n.errors;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Ce="SIGNUP_RESTRICTIONS_SUCCESS",xe="SIGNUP_RESTRICTIONS_FAILURE",Fe="SIGNUP_ATTEMPT",Pe="SIGNUP_FAILURE",Ae="SIGNUP_SUCCESS",je="FACEBOOK_SIGNUP_ATTEMPT",Te="FACEBOOK_SIGNUP_SUCCESS",Ie="FACEBOOK_SIGNUP_FAILURE",Ne="VALIDATE_FIELD_ATTEMPT",Re="VALIDATE_FIELD_FAILURE",Me="VALIDATE_FIELD_SUCCESS",Ze="UPDATE_SIGNUP_DATA",Le="COUNTRY_NOT_LAUNCHED",Ue="CLEAR_ALL_ERRORS";function Be(){return function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),e.prev=1,!window.__spotify||!0!==window.__spotify.is_running_on_teamcity){e.next=6;break}e.t0={},e.next=9;break;case 6:return e.next=8,Oe();case 8:e.t0=e.sent;case 9:o=e.t0,t(Ge(o)),e.next=17;break;case 13:e.prev=13,e.t1=e.catch(1),t(We(e.t1)),r.app&&r.app.mode&&"welcome"!==r.app.mode&&(t(se()),t(le(!0)));case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()}function Ge(e){return{type:Ce,restrictions:e}}function We(e){return{type:xe,error:e}}function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=(0,u.Z)(l().mark((function t(n,r){var o,i,a,s,u;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Ke()),t.next=3,n(K());case 3:return o=r().signup.formData,i=r().login.utmParameters,t.prev=5,t.next=8,De(o,i);case 8:n(Ye()),a=o.email,s=o.password,n(W({username:a,password:s,rememberMe:!0},!0,e)),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(5),u={},Object.keys(t.t0).forEach((function(e){u["birthdate"===e?"birthDate":e]={message:t.t0[e]}})),n(ze(u));case 18:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()}function He(e){return function(){var t=(0,u.Z)(l().mark((function t(n,r){var o,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(K());case 2:return o=r().signup.formData[e],i=r().login.utmParameters,n(et(e,o)),t.prev=5,t.next=8,we((0,s.Z)({},e,o),i,!0);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),t.t0[e]&&n(tt(e,{message:t.t0[e]}));case 13:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e,n){return t.apply(this,arguments)}}()}function Ke(){return{type:Fe}}function Ye(){return{type:Ae}}function ze(e){return{type:Pe,errors:e}}var qe=function(){var e=(0,u.Z)(l().mark((function e(t,n){var r,o,i,a,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=s.length>2&&void 0!==s[2]?s[2]:null)&&(n.args=n.args||[],n.args[0]=n.args[0]||{},n.args[0].actionHash=r),e.prev=2,e.t0=JSON,e.next=6,v(n);case 6:e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),i=o.redirectTo||"xpui",t($e()),t(L(null,0,I,!0,i)),e.next=18;break;case 13:e.prev=13,e.t2=e.catch(2),a=e.t2,"string"==typeof e.t2&&(a=JSON.parse(e.t2)),t(Qe(a));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,n){return e.apply(this,arguments)}}();function Je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){var r={name:N,args:[{method:e,enableSignup:!0}]};n(Xe()),qe(n,r,t)}}function Xe(){return{type:je}}function $e(){return{type:Te}}function Qe(e){return{type:Ie,errorData:e}}function et(e,t){return{type:Ne,field:e,value:t}}function tt(e,t){return{type:Re,field:e,error:t}}function nt(e){return{type:Me,field:e}}function rt(e){return{type:Ze,data:e}}function ot(){return{type:Le}}function it(){return{type:Ue}}n(58549),n(24353);var at,st,ut,ct=n(54465),lt=n(83235),dt=n(52113),pt=(n(68063),n(47408),n(47785),n(81049),n(56404),n(86961)),ft=n.n(pt);function ht(e){return"string"!=typeof e}!function(e){e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu"}(at||(at={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(st||(st={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(ut||(ut={}));var gt={},vt=function(e,t){try{return(gt[e]||(gt[e]=new Intl.PluralRules(e))).select(t)}catch(e){return ut.OTHER}};function mt(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}var yt=function(e){return"ar"===e?"ar-u-nu-latn":e};function bt(e){return{seconds:Math.round(e/1e3),minutes:Math.round(e/1e3/60),hours:Math.round(e/1e3/60/60),days:Math.round(e/1e3/60/60/24),weeks:Math.round(e/1e3/60/60/24/7)}}var _t=new(function(){function e(){(0,lt.Z)(this,e),(0,s.Z)(this,"_relativeTimeFormat",null),(0,s.Z)(this,"_dateTimeFormats",new Map),this._dictionary={},this._locale=at.en}return(0,dt.Z)(e,[{key:"getDateTimeFormat",value:function(e){var t=JSON.stringify(Object.keys(e).sort().map((function(t){return(0,s.Z)({},t,e[t])}))),n=this._dateTimeFormats.get(t);return void 0===n&&(n=new Intl.DateTimeFormat(yt(this._locale),e),this._dateTimeFormats.set(t,n)),n}},{key:"getRelativeTimeFormat",value:function(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=void 0===Intl.RelativeTimeFormat?null:new Intl.RelativeTimeFormat(this._locale)),this._relativeTimeFormat}},{key:"getDictionary",value:function(){return this._dictionary}},{key:"setDictionary",value:function(e){this._dictionary=e}},{key:"setLocale",value:function(e){this._locale=e,this._dateTimeFormats.clear(),this._relativeTimeFormat=null}},{key:"getLocale",value:function(){return this._locale}},{key:"getSmartlingLocale",value:function(){var e=this._locale;return ft()[e]||e}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}},{key:"get",value:function(e){for(var t=(e in this._dictionary?this._dictionary[e]:e),n="",r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(ht(t)){var a=o[0],s=vt(this._locale,parseInt(a,10)),u=t[s];void 0!==u?n=u:t.other&&(n=t.other)}else n=t;if(/%\d%/.test(n)){var c=["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"];if(!c.includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==o?void 0:o.length)>0)for(var l=0;l<o.length;l++){var d=o[l];if(null!=d)if("string"==typeof d)n=n.replace("{".concat(l,"}"),mt(d)).replace("%".concat(l,"%"),mt(d));else if("number"==typeof d){var p=this.formatNumber(d);n=n.replace("{".concat(l,"}"),p).replace("%".concat(l,"%"),p)}else if("object"===(0,ct.Z)(d))for(var f=0,h=Object.keys(d);f<h.length;f++){var g=h[f],v=d[g];n=n.replace("%".concat(g,"%"),mt(v))}}return n}},{key:"getSeparator",value:function(){switch(this._locale){case at.ar:return st.AR;case at.fa:return st.FA;default:return st.EN}}},{key:"formatNumber",value:function(e,t){return e.toLocaleString(yt(this._locale),t)}},{key:"formatNumberCompact",value:function(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}},{key:"formatDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={year:"numeric",month:"long",day:"numeric"},r=t||n;return this.getDateTimeFormat(r).format(e)}},{key:"formatRelativeDate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Date(Date.now());e=new Date(e);var r=this.getRelativeTimeFormat(),o=e.getTime()-n.getTime(),i=Math.abs(o)<2592e6;if(null!==r&&i){var a=bt(o),s=a.weeks,u=a.days,c=a.hours,l=a.minutes,d=a.seconds;return Math.abs(u)>=7?r.format(s,"weeks"):Math.abs(c)>=24?r.format(u,"days"):Math.abs(l)>=60?r.format(c,"hours"):Math.abs(d)>=60?r.format(l,"minutes"):r.format(d,"seconds")}return this.formatDate(e,t)}},{key:"__resetForTests",value:function(){this._dictionary={},this._locale=at.en,gt={}}}]),e}()),Et=2,kt=3,St=4,Dt={"auto-detect":{label:function(){return _t.get("desktop.settings.proxy.autodetect")}},"no-proxy":{label:function(){return _t.get("desktop.settings.proxy.noproxy")}},http:{label:function(){return _t.get("desktop.settings.proxy.http")}},socks4:{label:function(){return _t.get("desktop.settings.proxy.socks4")}},socks5:{label:function(){return _t.get("desktop.settings.proxy.socks5")}}},wt=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],Ot="sp://proxy/v1/";function Ct(){return(Ct=(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:Ot}),persistent:!1,onSuccess:function(n){var r=JSON.parse(n);200!==r.status&&t(new Error("Failed to fetch proxy settings (status code: ".concat(r.status,")")));var o=JSON.parse(r.body);e({mode:o["network.proxy.mode"],address:o["network.proxy.addr"],username:o["network.proxy.user"],password:o["network.proxy.pass"]})},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(){return(xt=(0,u.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r={"network.proxy.mode":t.mode};[Et,kt,St].includes(t.mode)&&(r["network.proxy.addr"]=t.address,r["network.proxy.user"]=t.username),[Et,St].includes(t.mode)&&(r["network.proxy.pass"]=t.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:Ot,body:JSON.stringify(r)}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,t){n(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,n){t(e)}})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pt="SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS",At="SETTINGS_FETCH_PROXY_SETTINGS_FAILURE",jt="SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS",Tt="SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE",It="SETTINGS_RESTART_CLIENT_SUCCESS",Nt="SETTINGS_RESTART_CLIENT_FAILURE";function Rt(){return function(e){(function(){return Ct.apply(this,arguments)})().then((function(t){e(function(e){return{type:Pt,data:e}}(t))}),(function(t){e(function(e){return{type:At,error:e}}(t))}))}}function Mt(e){return function(t){(function(e){return xt.apply(this,arguments)})(e).then((function(){t({type:jt}),t(Rt())}),(function(e){t(function(e){return{type:Tt,error:e}}(e))}))}}function Zt(){return function(e){(function(){return Ft.apply(this,arguments)})().then((function(){e({type:It})}),(function(t){e(function(e){return{type:Nt,error:e}}(t))}))}}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Bt=Ut(Ut(Ut(Ut({},o),r),i),a);n(28605),n(5629);var Gt=n(68463),Wt=n(4090),Vt=n(5297),Ht=(n(54886),n(53903),n(59496)),Kt=(n(89004),n(4637));function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var zt=function(e){(0,Gt.Z)(n,e);var t=Yt(n);function n(e){var r;return(0,lt.Z)(this,n),(r=t.call(this,e)).state={hidden:r.props.delay>0},r}return(0,dt.Z)(n,[{key:"componentDidMount",value:function(){var e=this;!0===this.state.hidden&&(this.throbberTimeout=setTimeout((function(){e.setState({hidden:!1})}),this.props.delay))}},{key:"componentWillUnmount",value:function(){this.throbberTimeout&&clearTimeout(this.throbberTimeout)}},{key:"render",value:function(){return this.state.hidden?null:(0,Kt.jsx)("div",{"data-testid":"glue-throbber",className:"GlueThrobber ".concat(this.props.initial?"throbber-initial":"throbber"),children:(0,Kt.jsx)("div",{})})}}]),n}(Ht.Component);zt.defaultProps={delay:0,initial:!0};var qt=n(86027),Jt=(n(71882),n(55530)),Xt=n.n(Jt);function $t(){return Xt().create().toString()}var Qt=n(69663),en=n(42382);function tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var nn=function(e){(0,Gt.Z)(n,e);var t=tn(n);function n(e){var r;return(0,lt.Z)(this,n),(r=t.call(this,e)).handleLoginClick=r.handleLoginClick.bind((0,qt.Z)(r)),r.handleErrorClick=r.handleErrorClick.bind((0,qt.Z)(r)),r}return(0,dt.Z)(n,[{key:"handleLoginClick",value:function(){var e=$t();this.props.openLoginPage(e),this.props.onInteraction("login/welcome","click","open-page-login",null,e)}},{key:"handleErrorClick",value:function(e){e.target.getAttribute("data-action")&&("showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage())}},{key:"render",value:function(){var e=this.props.errorMessage;return(0,Kt.jsxs)("main",{className:"Welcome","data-testid":"welcome",children:[(0,Kt.jsxs)("h1",{className:"HeroText __welcome",children:[_t.get("desktop-auth.login.millions-of-songs"),(0,Kt.jsx)("br",{}),_t.get("desktop-auth.login.free-on-spotify")]}),(0,Kt.jsxs)("div",{className:"Welcome__signup-or-login",children:[e&&(0,Kt.jsxs)("div",{className:"Welcome__error-message",role:"alert",onClick:this.handleErrorClick,"aria-live":"assertive",children:[(0,Kt.jsx)(Qt.l,{className:"Welcome__error-message__icon"}),(0,Kt.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})]}),(0,Kt.jsx)(en.D,{id:"login-button",onClick:this.handleLoginClick,"data-ta-id":"welcome-login-button","data-testid":"login-button",fullWidth:!0,children:_t.get("desktop.login.LoginButton")})]})]})}}]),n}(Ht.PureComponent);const rn=(0,f.$j)((function(e){return{errorMessage:e.app.errorMessage}}),(function(e){return{openLoginPage:function(t){return e(Bt.enterLoginMode(t))},openSettingsPage:function(){return e(Bt.enterSettingsMode())},onInteraction:function(t,n,r,o,i){return e(Bt.interaction(t,n,r,o,i))}}}))(nn);var on=n(59688),an=n(33892),sn=n(22517),un=(n(7232),"https://www.spotify.com/redirect/account-page/"),cn="showSettings",ln={id:"UnknownLoginErrorMessage"},dn={id:"DefaultErrorMessage",replace:[cn]},pn={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[cn]},400:ln,401:ln,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:ln,405:ln,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[un]},408:{id:"RegionMismatchMessage",replace:[un,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:ln,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:ln,415:ln,416:ln,417:{id:"FacebookCredentialsMisusedMessage"},418:ln,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},fn={1:ln,2:ln,3:{id:"BadCredentialsMessage"},4:ln,5:ln,6:ln,7:ln,8:ln,9:ln},hn={1:{silent:!0},2:ln,3:ln,4:{id:"SessionExpiredMessage"},5:dn};function gn(e,t,n){if(0===t)return!1;if(!e&&!t)return!1;var r=pn;switch(e){case"session":r=fn;break;case"desktop_login_accounts":r=hn}var o=r[t]||dn;if(o.silent)return!1;var i=o.replace||[],a="";switch(o.id){case"UnknownLoginErrorMessage":a=_t.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":a=_t.get("desktop.login.DefaultErrorMessage",i[0]);break;case"SessionTerminatedMessage":a=_t.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":a=_t.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":a=_t.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":a=_t.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":a=_t.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":a=_t.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":a=_t.get("desktop.login.ErrorProxyAuthRequired",i[0]);break;case"CriticalUpdate":a=_t.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":a=_t.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":a=_t.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":a=_t.get("desktop.login.MissingUserInfoMessage",i[0]);break;case"RegionMismatchMessage":a=_t.get("desktop.login.RegionMismatchMessage",i[0],i[1]);break;case"PremiumUsersOnlyMessage":a=_t.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":a=_t.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":a=_t.get("desktop.login.ClientUpdateFail",i[0]);break;case"FbUserNotFoundSignUp":a=_t.get("desktop.login.FbUserNotFoundSignUp",i[0])}return n?"".concat(a,"<br>").concat(_t.get("desktop.login.errorCode",n)):a}function vn(e){var t=e.validity,n=void 0===t?{}:t;return n.valid?null:["valueMissing","typeMismatch","tooShort"].find((function(e){return n[e]}))}const mn="H5vfurs7KNEs9Io5DUA7",yn="qfBRU_bttJde7gy46oAB",bn="ypTrzM1PtlrZp04qs6Eq",_n="oHZmDpK0SrWDaXhPjUtC",En="lAHowB9HYfAUrg9UaSde";var kn=n(56719),Sn=Xt().create().toString();var Dn="has-used-app",wn=!window.localStorage.getItem(Dn);wn&&window.localStorage.setItem(Dn,!0);const On=function(){var e,t=m.getItem("utmParameters");try{e=t?JSON.parse(t).referral:""}catch(t){e=""}return e};var Cn,xn=function(){function e(t){(0,lt.Z)(this,e),this._eventSender=t}return(0,dt.Z)(e,[{key:"logPageView",value:function(e){var t=e.page;this.logAction({page:t,action_type:"pageview",action_intent:""})}},{key:"logAction",value:function(e,t){var n=e.page,r=e.action_type,o=e.action_intent,i=e.item_id,a=e.action_hash;this._eventSender.send((0,kn.e)({action_type:r,action_intent:o,action_page:n,action_item_id:i,action_hash:a,device_is_new_install:wn,device_locale:window.__spotify.locale,device_referrer:On(),ab_flags:"",session_id:Sn}),t)}}]),e}();!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR"}(Cn||(Cn={}));var Fn=function(e){var t,n=e.eventSender,r=(0,Ht.useState)(""),o=(0,on.Z)(r,2),i=o[0],a=o[1],s=(0,Ht.useState)(!1),c=(0,on.Z)(s,2),d=c[0],p=c[1],h=(0,Ht.useState)(!1),g=(0,on.Z)(h,2),m=g[0],y=g[1],b=(t=(0,f.I0)(),function(){t(ce())}),_=(0,Ht.useRef)(0),E=(0,Ht.useMemo)((function(){return new xn(n)}),[n]);(0,Ht.useEffect)((function(){E.logPageView({page:"auth-on-web"})}),[E]);var k=function(){var e=(0,u.Z)(l().mark((function e(t){var r,o,i,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=++_.current,o=$t(),y(t),a(""),p(!0),E.logAction({page:"auth-on-web",action_type:"click",action_intent:t?"sign-up-with-browser":"log-in-with-browser",action_hash:o}),e.prev=6,e.next=9,v({name:N,args:[{method:"login-accounts",enableSignup:t,actionHash:o}]});case 9:return E.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-success-signup":"show-success-login"},{flush:!1}),e.next=12,n.finalFlush();case 12:location.href="spotify:app:xpui",e.next=26;break;case 15:if(e.prev=15,e.t0=e.catch(6),i="string"==typeof e.t0?JSON.parse(e.t0):e.t0,r===_.current){e.next=21;break}return E.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:null==i?void 0:i.errorReference}),e.abrupt("return");case 21:p(!1),s=gn(i.errorCategory,i.errorCode,i.errorReference),"desktop_login_accounts"===i.errorCategory&&i.errorCode===Cn.OPERATION_TIMED_OUT&&(s=t?_t.get("desktop-auth.login.signup-time-out"):_t.get("desktop-auth.login.login-time-out")),a(s||""),E.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-error-signup":"show-error-login",item_id:null==i?void 0:i.errorReference});case 26:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return(0,Kt.jsx)("main",{children:d?(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsx)(an.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:mn,children:m?_t.get("desktop-auth.login.go-to-browser-signup"):_t.get("desktop-auth.login.go-to-browser-login")}),(0,Kt.jsxs)("button",{className:bn,onClick:function(){p(!1),E.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},children:[(0,Kt.jsx)(an.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:_t.get("desktop-auth.login.not-seeing-browser")})," ",(0,Kt.jsx)(an.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:_t.get("desktop-auth.login.try-again")})]})]}):(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsxs)(an.D,{as:"h1",variant:"alto",semanticColor:"textBase",className:mn,children:[_t.get("desktop-auth.login.millions-of-songs"),(0,Kt.jsx)("br",{}),_t.get("desktop-auth.login.free-on-spotify")]}),i&&(0,Kt.jsxs)("div",{className:_n,role:"alert",onClick:function(e){e.currentTarget.getAttribute("data-action")&&("showSettings"===e.currentTarget.getAttribute("data-action")&&b())},"aria-live":"assertive",children:[(0,Kt.jsx)(Qt.l,{className:En}),(0,Kt.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})]}),(0,Kt.jsx)(en.D,{onClick:function(){k(!1)},iconTrailing:sn.T,children:_t.get("desktop-auth.login.log-in-with-browser")}),(0,Kt.jsxs)("button",{className:yn,onClick:function(){k(!0)},children:[(0,Kt.jsx)(an.D,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:_t.get("desktop-auth.login.new-to-spotify")}),(0,Kt.jsx)(an.D,{as:"span",variant:"balladBold",semanticColor:"textBase",children:_t.get("desktop-auth.login.sign-up-with-browser")}),(0,Kt.jsx)(sn.T,{iconSize:16,semanticColor:"textBase"})]})]})})},Pn=(n(66410),n(51791)),An=n(25237),jn=n(31740),Tn=n(84875),In=n.n(Tn);function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Rn=function(){return(0,Kt.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Kt.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM7.25 3V10H8.75V3H7.25ZM7.25 11.5256V13.0256H8.75V11.5256H7.25Z",fill:"#eb6471"})})},Mn=function(e){(0,Gt.Z)(n,e);var t=Nn(n);function n(){return(0,lt.Z)(this,n),t.apply(this,arguments)}return(0,dt.Z)(n,[{key:"render",value:function(){var e=this.props.errorMessage;return(0,Kt.jsxs)("div",{"aria-live":"polite",className:In()("FieldError",{"FieldError--hidden":!e}),children:[(0,Kt.jsx)(Rn,{}),(0,Kt.jsx)("span",{children:e||""})]})}}]),n}(Ht.PureComponent);function Zn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Ln=0;var Un=function(e){(0,Gt.Z)(n,e);var t=Zn(n);function n(){var e;(0,lt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).idNumber=++Ln,e.handleChange=e.handleChange.bind((0,qt.Z)(e)),e}return(0,dt.Z)(n,[{key:"handleChange",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.placeholderLabel,r=e.name,o=e.type,i=e.isRequired,a=e.taId,s=e.id,u=e.defaultValue,c=e.value,l=e.minLength,d=e.autoFocus,p=e.hasError,f=e.isDisabled,h=e.isHiddenForScreenReaders,g=e.useCustomStyle,v=e.className,m=e.inputClassName,y=e.inputRef,b=e.onBlur,_=e.onFocus,E=e.onInput,k=e.onKeyDown,S=e.onKeyUp,D=s||"GlueTextInput-".concat(this.idNumber);return(0,Kt.jsx)("label",{className:g?v:"GlueTextInput",htmlFor:D,"aria-label":t,"aria-hidden":!!h||void 0,children:(0,Kt.jsx)("input",{className:g?m:In()("GlueTextInput__input",{"GlueTextInput__input--has-error":p}),tabIndex:h?"-1":void 0,type:o,id:D,name:r,"data-ta-id":a,"aria-invalid":p,disabled:f,minLength:l,autoFocus:d,placeholder:n||t,value:u?void 0:c,defaultValue:u,onBlur:b,onFocus:_,onChange:this.handleChange,onInput:u?void 0:E,onKeyDown:k,onKeyUp:S,ref:y,required:i})})}}]),n}(Ht.PureComponent);function Bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}Un.defaultProps={name:"",type:"text",isRequired:!1,taId:"",defaultValue:void 0,value:"",minLength:0,autoFocus:!1,hasError:!1,isDisabled:!1,isHiddenForScreenReaders:!1,useCustomStyle:!1,onBlur:function(){},onFocus:function(){},onChange:function(){},onInput:function(){},onKeyDown:function(){}};var Gn=function(e){(0,Gt.Z)(n,e);var t=Bn(n);function n(e){var r;return(0,lt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,qt.Z)(r),"handleTogglePasswordVisible",(function(){var e=!r.state.passwordVisible;r.setState({passwordVisible:e}),r.props.onTogglePasswordVisibility&&r.props.onTogglePasswordVisibility(e)})),r.state={isEditing:!1,passwordVisible:!1},r.handleBlur=r.handleBlur.bind((0,qt.Z)(r)),r.handleInput=r.handleInput.bind((0,qt.Z)(r)),r}return(0,dt.Z)(n,[{key:"handleBlur",value:function(e){var t=e.target,n=e.relatedTarget;this.setState({isEditing:!1}),n&&(n.name||"submit"===n.type)&&this.validate(t)}},{key:"handleInput",value:function(){this.setState({isEditing:!0})}},{key:"validate",value:function(e){var t=this.props,n=t.name,r=t.onValidate;!t.noValidate&&r&&r(n,vn(e))}},{key:"renderPasswordEyeToggler",value:function(){var e=this.props.type,t=this.state.passwordVisible;return"password"!==e?null:(0,Kt.jsxs)(Ht.Fragment,{children:[(0,Kt.jsx)("button",{type:"button",onClick:this.handleTogglePasswordVisible,tabIndex:"-1",className:"FormField--passwordEyeIcon ".concat(t?"passwordVisible":"")}),(0,Kt.jsx)("span",{tabIndex:"-1",className:"FormField--passwordEyeIcon--cross ".concat(t?"passwordVisible":"")})]})}},{key:"render",value:function(){var e=this.props,t=e.error,n=void 0===t?{}:t,r=e.noValidate,o=e.label,i=e.name,a=e.type,s=e.value,u=e.isRequired,c=e.minLength,l=e.autoFocus,d=e.isDisabled,p=e.onChange,f=e.onKeyUp,h=e.onFocus,g=e.rightIcon,v=void 0===g?null:g,m=this.state,y=m.isEditing,b=m.passwordVisible,_=v,E=a;return"password"===a&&b&&(E="text"),(0,Kt.jsxs)("div",{className:In()("FormField",{"FormField--no-validate":r}),children:[(0,Kt.jsx)(Un,{label:o,name:i,type:E,taId:"".concat(i,"-field"),value:s,isRequired:u,minLength:c,autoFocus:l,hasError:!!n.message&&!y,isDisabled:d,onChange:p,onFocus:h,onKeyUp:f,onBlur:this.handleBlur,onInput:this.handleInput}),_&&(0,Kt.jsx)(_,{className:"FormField--rightIcon"}),this.renderPasswordEyeToggler(),!r&&!y&&n.message&&(0,Kt.jsx)(Kt.Fragment,{children:(0,Kt.jsx)(Mn,{errorMessage:n.message})})]})}}]),n}(Ht.PureComponent);const Wn=(0,f.$j)((function(){return{}}),(function(){return{}}))(Gn);var Vn=["type","name","label","classes","hasError"];function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var zn=function(e){(0,Gt.Z)(n,e);var t=Yn(n);function n(){var e;(0,lt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleBlur=e.handleBlur.bind((0,qt.Z)(e)),e}return(0,dt.Z)(n,[{key:"handleBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.props.onBlur&&this.props.onBlur(e)}},{key:"render",value:function(){var e=this.props,t=e.type,n=void 0===t?"text":t,r=e.name,o=e.label,i=e.classes,a=e.hasError,s=(0,pe.Z)(e,Vn),u="".concat(r,"-field");return(0,Kt.jsxs)("span",{className:i,children:[(0,Kt.jsx)("label",{className:"glue-hidden-visually",htmlFor:u,children:o}),(0,Kt.jsx)("input",Kn(Kn({},s),{},{onBlur:this.handleBlur,type:n,name:r,id:u,"data-ta-id":u,className:In()("form-control Input",{"Input--has-error":a}),"aria-invalid":!!a,placeholder:o,required:!0}))]})}}]),n}(Ht.PureComponent),qn=(new Date).getFullYear()-120,Jn=function(e,t,n){var r=null;return!function(e,t,n){return[e,t,n].reduce((function(e,t){return e&&!!t}),!0)}(e,t,n)?r="incomplete":function(e,t,n){var r=new Date(n,t-1,e);return!(r.getFullYear()<qn)&&r.getDate()===e&&r.getMonth()===t-1&&r.getFullYear()===n}(e,t,n)||(r="invalid"),r};function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var er={BIG_ENDIAN:"big",LITTLE_ENDIAN:"little",MIDDLE_ENDIAN:"middle"},tr=function(e){(0,Gt.Z)(n,e);var t=Qn(n);function n(e){var r;return(0,lt.Z)(this,n),(r=t.call(this,e)).state={isEditing:!1},r.monthStrings=[_t.get("desktop.login.January"),_t.get("desktop.login.February"),_t.get("desktop.login.March"),_t.get("desktop.login.April"),_t.get("desktop.login.May"),_t.get("desktop.login.June"),_t.get("desktop.login.July"),_t.get("desktop.login.August"),_t.get("desktop.login.September"),_t.get("desktop.login.October"),_t.get("desktop.login.November"),_t.get("desktop.login.December")],r.handleInput=r.handleInput.bind((0,qt.Z)(r)),r.handleBlur=r.handleBlur.bind((0,qt.Z)(r)),r.handleFocus=r.handleFocus.bind((0,qt.Z)(r)),r}return(0,dt.Z)(n,[{key:"handleInput",value:function(e){var t=e.target,n=t.name,r=t.value,o=t.validity,i=void 0===o?{}:o;this.setState({isEditing:!0});var a=parseInt(r,10);i.valueMissing||!isFinite(r)||isNaN(a)?this.props.onChange($n($n({},this.props.value),{},(0,s.Z)({},n,void 0))):this.props.onChange($n($n({},this.props.value),{},(0,s.Z)({},n,a)))}},{key:"handleBlur",value:function(e){var t=e.relatedTarget?e.relatedTarget.name:null,n=["day","month","year"].includes(t);this.setState({isEditing:n}),n||this.validate()}},{key:"handleFocus",value:function(e){this.setState({isEditing:!0});var t=e.relatedTarget?e.relatedTarget.name:null;!["day","month","year"].includes(t)&&this.props.onFocus&&this.props.onFocus()}},{key:"validate",value:function(){var e=this.props.value,t=e.day,n=e.month,r=e.year,o=Jn(t,n,r,this.props.minAge);this.props.onValidate("birthDate",o)}},{key:"renderYear",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,Kt.jsx)(zn,{type:"number",name:"year",classes:"FormDate__input FormDate__year",label:_t.get("desktop.login.Year"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:qn,hasError:t.includes("year"),onFocus:this.handleFocus})}},{key:"renderMonth",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,Kt.jsxs)("select",{name:"month",id:"month-field",className:In()("form-control Input FormDate__input FormDate__month",{"Input--has-error":t.includes("month")}),autoFocus:n,defaultValue:e||"",required:!0,onChange:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,onFocus:this.handleFocus,children:[(0,Kt.jsx)("option",{value:"",disabled:!0,hidden:!0,children:_t.get("desktop.login.Month")}),this.monthStrings.map((function(e,t){return(0,Kt.jsx)("option",{value:t+1,children:e},t)}))]})}},{key:"renderDay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(0,Kt.jsx)(zn,{type:"number",name:"day",classes:"FormDate__input FormDate__day",label:_t.get("desktop.login.Day"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1,max:31,hasError:t.includes("day"),onFocus:this.handleFocus})}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,o=t.dateEndianness,i=t.error,a=void 0===i?{}:i,s=t.autoFocus,u=this.props.value,c=u.day,l=u.month,d=u.year,p=this.state.isEditing,f=["day","month","year"].filter((function(t){return!(p||!a.message)&&("incomplete"===a.code?!e.props.value[t]:"tooOld"!==a.code||"year"===t)})),h="";return h="big"===er[o]?(0,Kt.jsxs)("div",{className:"FormDate__inputs",children:[this.renderYear(d,f,s),this.renderMonth(l,f),this.renderDay(c,f)]}):"little"===er[o]?(0,Kt.jsxs)("div",{className:"FormDate__inputs",children:[this.renderDay(c,f,s),this.renderMonth(l,f),this.renderYear(d,f)]}):(0,Kt.jsxs)("div",{className:"FormDate__inputs",children:[this.renderMonth(l,f,s),this.renderDay(c,f),this.renderYear(d,f)]}),(0,Kt.jsxs)("div",{className:"FormDate",children:[(0,Kt.jsx)("label",{className:"FormDate__label ".concat(n,"-label"),htmlFor:"month-field",children:r}),h,!p&&a.message&&(0,Kt.jsx)(Kt.Fragment,{children:(0,Kt.jsx)(Mn,{errorMessage:a.message})})]})}}]),n}(Ht.PureComponent);tr.defaultProps={value:{},dateEndianness:"MIDDLE_ENDIAN",minAge:13};const nr=(0,f.$j)((function(){return{}}),(function(){return{}}))(tr);var rr=["name","label","options","value","showTitle","error","onValidate","onOptionFocus"];function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var sr=function(e){(0,Gt.Z)(n,e);var t=ar(n);function n(e){var r;return(0,lt.Z)(this,n),(r=t.call(this,e)).state={isEditing:!1},r.handleBlur=r.handleBlur.bind((0,qt.Z)(r)),r.handleFocus=r.handleFocus.bind((0,qt.Z)(r)),r}return(0,dt.Z)(n,[{key:"handleBlur",value:function(e){this.state={isEditing:!1},(e.relatedTarget?e.relatedTarget.name:null)!==this.props.name&&this.validate(e.target)}},{key:"handleFocus",value:function(e){this.state={isEditing:!0},this.props.onOptionFocus&&e&&e.target&&this.props.onOptionFocus(e.target.value)}},{key:"validate",value:function(e){var t=this.props,n=t.name,r=t.onValidate;r&&r(n,vn(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.label,o=t.options,i=t.value,a=t.showTitle,s=t.error,u=void 0===s?{}:s,c=(t.onValidate,t.onOptionFocus,(0,pe.Z)(t,rr)),l=this.state.isEditing,d="".concat(n,"-field"),p=In()("FormRadioSelect",{"FormRadioSelect--is-disabled":this.props.disabled});return(0,Kt.jsxs)("div",{className:p,children:[(0,Kt.jsx)("label",{className:a?"":"glue-hidden-visually",htmlFor:d,children:r}),o.map((function(t){var r="".concat(t.value,"-radio");return(0,Kt.jsxs)("span",{className:i===t.value?"checked":"",children:[(0,Kt.jsx)("input",ir(ir({},c),{},{name:n,type:"radio",id:r,className:"glue-hidden-visually",value:t.value,checked:i===t.value,onBlur:e.handleBlur,onFocus:e.handleFocus,required:!0,disabled:e.props.disabled})),(0,Kt.jsx)("label",{className:In()("FormRadioSelect__label",{"FormRadioSelect__label--has-error":!!u.message}),htmlFor:r,children:t.label})]},t.value)})),!l&&u.message&&(0,Kt.jsx)(Kt.Fragment,{children:(0,Kt.jsx)(Mn,{errorMessage:u.message})})]})}}]),n}(Ht.PureComponent);const ur=(0,f.$j)((function(){return{}}),(function(){return{}}))(sr);function cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var lr=function(e){(0,Gt.Z)(n,e);var t=cr(n);function n(){var e;(0,lt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleChange=e.handleChange.bind((0,qt.Z)(e)),e}return(0,dt.Z)(n,[{key:"handleChange",value:function(e){this.props.isDisabled||this.props.onChange(e.target.checked)}},{key:"render",value:function(){var e="".concat(this.props.name,"-field"),t=In()("GlueCheckbox",{"GlueCheckbox--is-disabled":this.props.isDisabled});return(0,Kt.jsxs)("div",{className:t,children:[(0,Kt.jsx)("input",{className:"GlueCheckbox__input",id:e,name:this.props.name,checked:this.props.isChecked,type:"checkbox",onChange:this.handleChange,disabled:this.props.isDisabled}),(0,Kt.jsx)("label",{className:"GlueCheckbox__label",htmlFor:e,dangerouslySetInnerHTML:{__html:this.props.label}})]})}}]),n}(Ht.PureComponent);function dr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}lr.defaultProps={label:"",name:"",isChecked:!1,isDisabled:!1,onChange:function(){}};var pr=function(e){(0,Gt.Z)(n,e);var t=dr(n);function n(e){var r;return(0,lt.Z)(this,n),(r=t.call(this,e)).handleClick=r.handleClick.bind((0,qt.Z)(r)),r}return(0,dt.Z)(n,[{key:"handleClick",value:function(e){e.target.getAttribute("data-action")&&("showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage())}},{key:"render",value:function(){var e=this.props.errorData,t=e?gn(e.errorCategory,e.errorCode,e.errorReference):null;return t?(0,Kt.jsxs)("div",{className:"alert alert-danger ErrorMessage alert-icon",id:"login-message","data-ta-id":"login-message","data-testid":"login-message",role:"alert","aria-live":"assertive",onClick:this.handleClick,children:[(0,Kt.jsx)(Qt.l,{iconSize:24}),(0,Kt.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})]}):null}}]),n}(Ht.Component);const fr=(0,f.$j)((function(e){var t=e.app.mode;return"welcome"===t&&(t="signup"),{errorData:e[t]&&e[t].errorData?e[t].errorData:null}}),(function(e){return{openSettingsPage:function(){return e(Bt.enterSettingsMode())},openSignupPage:function(){return e(Bt.openSignupPage())}}}))(pr);function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var gr=function(e){(0,Gt.Z)(n,e);var t=hr(n);function n(e){var r;return(0,lt.Z)(this,n),(r=t.call(this,e)).state={tosAgreed:!1,privacyAgreed:!1},r.handleTosChange=r.handleTosChange.bind((0,qt.Z)(r)),r.handlePrivacyChange=r.handlePrivacyChange.bind((0,qt.Z)(r)),r.handleTosAndPrivacyChange=r.handleTosAndPrivacyChange.bind((0,qt.Z)(r)),r.handleEulaChange=r.handleEulaChange.bind((0,qt.Z)(r)),r.eulaId=n.getNextId(),r}return(0,dt.Z)(n,[{key:"handleTosChange",value:function(e){var t=this;this.setState({tosAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handlePrivacyChange",value:function(e){var t=this;this.setState({privacyAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handleTosAndPrivacyChange",value:function(e){var t=this;this.setState({tosAgreed:e,privacyAgreed:e},(function(){t.handleEulaChange()}))}},{key:"handleEulaChange",value:function(){this.props.onChange(this.state.tosAgreed&&this.state.privacyAgreed)}},{key:"render",value:function(){var e=null,t='<a href="https://www.spotify.com/int/legal/end-user-agreement/" target="_new">'.concat(_t.get("desktop.login.TermsAndConditions"),"</a>"),n='<a href="https://www.spotify.com/int/legal/privacy-policy/" target="_new">'.concat(_t.get("desktop.login.PrivacyPolicy"),"</a>"),r=_t.get("desktop.login.SignupButton");return e=this.props.restrictions.pretick_eula?(0,Kt.jsxs)("div",{children:[!this.props.hideTermsAndConditions&&(0,Kt.jsx)("p",{className:"SignupForm__terms-and-conditions",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.SignupAgree",r,t)}}),!this.props.hidePrivacyPolicy&&(0,Kt.jsx)("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.PrivacyPolicyAgree",n)}})]}):this.props.restrictions.can_accept_licenses_in_one_step?(0,Kt.jsxs)("div",{className:"SignupForm__checkbox-container",children:[(0,Kt.jsx)(lr,{"data-ta-id":"agree-eula",name:"agree-eula-".concat(this.eulaId),label:this.props.restrictions.specific_licenses?_t.get("desktop.login.SignupAgreeCheckboxSpecificLicenses",t,n):_t.get("desktop.login.SignupAgreeCheckbox",t,n),onChange:this.handleTosAndPrivacyChange,isChecked:this.state.tosAgreed&&this.state.privacyAgreed,isDisabled:this.props.disabled}),this.props.restrictions.specific_licenses&&(0,Kt.jsx)("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.PrivacyPolicyAgree",n)}})]}):(0,Kt.jsxs)("div",{children:[(0,Kt.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,Kt.jsx)(lr,{"data-ta-id":"agree-tos",name:"agree-tos-".concat(this.eulaId),label:_t.get("desktop.login.TermsOfServiceAgreeCheckbox",t),onChange:this.handleTosChange,isChecked:this.state.tosAgreed,isDisabled:this.props.disabled})}),(0,Kt.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,Kt.jsx)(lr,{"data-ta-id":"agree-privacy",name:"agree-privacy-".concat(this.eulaId),label:_t.get("desktop.login.PrivacyPolicyAgreeCheckbox",n),onChange:this.handlePrivacyChange,isChecked:this.state.privacyAgreed,isDisabled:this.props.disabled})})]}),(0,Kt.jsxs)("div",{className:"EulaAgreement",children:[e,this.props.error&&(0,Kt.jsx)(Kt.Fragment,{children:(0,Kt.jsx)(Mn,{errorMessage:this.props.error.message})})]})}}],[{key:"getNextId",value:function(){var e=(n.instanceCount||0)+1;return n.instanceCount=e,e}}]),n}(Ht.PureComponent);const vr=(0,f.$j)((function(){return{}}),(function(){return{}}))(gr);n(40913);function mr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var yr=function(e){(0,Gt.Z)(n,e);var t=mr(n);function n(){var e;(0,lt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,s.Z)((0,qt.Z)(e),"handleClick",(function(t){var n=e.props.method;t&&(t.preventDefault(),t.stopPropagation()),e.props.onClick(n)})),e}return(0,dt.Z)(n,[{key:"render",value:function(){var e,t=this.props,n=t.type,r=t.label,o=t.isDisabled,i=t.method,a=i.substr(0,1).toUpperCase()+i.substr(1),u=In()("button","SocialButton","".concat(a,"Button"),(e={},(0,s.Z)(e,"".concat(a,"Button--login"),"login"===n),(0,s.Z)(e,"".concat(a,"Button--signup"),"signup"===n),e));return(0,Kt.jsx)("button",{type:"button",className:u,onClick:this.handleClick,"data-ta-id":"".concat(i,"-").concat(n,"-button"),disabled:o,children:r})}}]),n}(Ht.PureComponent);function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var kr=function(e){(0,Gt.Z)(n,e);var t=Er(n);function n(e){var r;return(0,lt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,qt.Z)(r),"handleAgreeEulaChange",(function(e){var t=e?"checked":"unchecked";r.props.onInteraction("signup","click","eula-change-".concat(t)),r.setState({eulaAgreed:e,error:e?{}:r.state.error})})),(0,s.Z)((0,qt.Z)(r),"handleOnClick",(function(){var e,t=function(){return r.state.eulaAgreed||r.props.restrictions.pretick_eula||r.props.hideEula};t()?(e=r.props).onClick.apply(e,arguments):r.setState({error:{message:_t.get("desktop.login.agreeEula.notAccepted")}})})),r.state={eulaAgreed:r.props.restrictions.pretick_eula,error:{}},r}return(0,dt.Z)(n,[{key:"render",value:function(){return(0,Kt.jsxs)("div",{className:"SignupFacebook",children:[(0,Kt.jsx)(yr,{method:"facebook",isDisabled:this.props.isDisabled,onClick:this.handleOnClick,type:"signup",label:_t.get("desktop.login.SignupButtonFacebookNirvana")}),this.props.restrictions.pretick_eula||this.props.hideEula?null:(0,Kt.jsx)(vr,{restrictions:this.props.restrictions,error:this.state.error,disabled:this.props.isDisabled,onChange:this.handleAgreeEulaChange})]})}}]),n}(Ht.PureComponent);(0,s.Z)(kr,"defaultProps",{isDisabled:!1,hideEula:!1});const Sr=(0,f.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions}}),(function(e){return{onInteraction:function(t,n,r,o,i){return e(Bt.interaction(t,n,r,o,i))},onClick:function(t){var n=$t();e(Bt.signupWithAccounts(t,n)),e(Bt.interaction("signup","click","create-account-".concat(t),null,n))}}}),(function(e,t){return _r(_r(_r({},e),t),{},{onClick:function(e){t.onClick(e)}})}))(kr);var Dr=function(e){var t=e.title;return(0,Kt.jsx)("p",{className:"FormTitleSeparator","aria-hidden":"true",children:t})};Dr.defaultProps={title:""};const wr=Dr;function Or(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Cr=function(e){(0,Gt.Z)(n,e);var t=Or(n);function n(e){var r;return(0,lt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,qt.Z)(r),"handleEmailValidate",(function(e,t){r.props.onValidate(e,t),t||r.props.validateEmail()})),(0,s.Z)((0,qt.Z)(r),"handleEmailFocus",(function(){r.props.onInteraction("signup","click","input-email")})),(0,s.Z)((0,qt.Z)(r),"handlePasswordValidate",(function(e,t){r.props.onValidate(e,t),t||r.props.validatePassword()})),(0,s.Z)((0,qt.Z)(r),"handlePasswordFocus",(function(){r.props.onInteraction("signup","click","input-password")})),(0,s.Z)((0,qt.Z)(r),"handleNameFocus",(function(){r.props.onInteraction("signup","click","input-name")})),(0,s.Z)((0,qt.Z)(r),"handleGenderOptionFocus",(function(e){r.props.onInteraction("signup","click","input-gender-".concat(e))})),(0,s.Z)((0,qt.Z)(r),"handleInputChange",(function(e){var t=e.target,n=t.name,o=t.value;r.props.updateData((0,s.Z)({},n,o)),r.setState({isEditing:!0})})),(0,s.Z)((0,qt.Z)(r),"handleBirthDateChange",(function(e){r.props.updateData({birthDate:e})})),(0,s.Z)((0,qt.Z)(r),"handleSendEmailChange",(function(e){r.props.updateData({sendEmail:e})})),(0,s.Z)((0,qt.Z)(r),"handleShareDataChange",(function(e){r.props.updateData({shareData:e})})),(0,s.Z)((0,qt.Z)(r),"handleAgreeEulaChange",(function(e){r.props.updateData({agreeEula:e})})),(0,s.Z)((0,qt.Z)(r),"handleSubmit",(function(e){e&&e.preventDefault();var t=r.props.step,n=$t();r.props.onInteraction("signup","click",0===t?"continue":"create-account",null,n),r.setState({isEditing:!1});var o=!0,i={0:["email","password","name"],1:["birthDate","gender","agreeEula"]};!!r.props.errors&&Object.keys(r.props.errors).filter((function(e){return-1!==i[t].indexOf(e)})).some((function(e){return r.props.errors[e]&&r.props.errors[e].message}))&&(o=!1);var a=function(e){return function(t){r.props.data[t]||(r.props.onValidate(t,{code:e}),o=!1)}};switch(t){case 0:["email","password","name"].forEach(a("valueMissing"));break;case 1:var s=r.props.data.birthDate,u=s.day,c=s.month,l=s.year;l||r.props.onInteraction("signup","view","show-error-empty-year",null,n),c||r.props.onInteraction("signup","view","show-error-empty-month",null,n),u||r.props.onInteraction("signup","view","show-error-empty-date",null,n);var d=Jn(u,c,l,r.props.restrictions.minimum_age);d&&(r.props.onValidate("birthDate",{code:d}),o=!1),a("valueMissing")("gender"),a("notAccepted")("agreeEula")}if(o)switch(t){case 0:r.setStep(t+1);break;case 1:r.props.signup(n)}})),(0,s.Z)((0,qt.Z)(r),"handleBack",(function(){var e=r.props.step;r.props.onInteraction("signup","click","back-step-".concat(e+1)),r.props.clearAllErrors(),e<=0?r.props.enterWelcomeMode():r.setStep(e-1)})),(0,s.Z)((0,qt.Z)(r),"handleLogin",(function(){var e=$t();r.props.onInteraction("signup","click","open-page-login",null,e),r.props.enterLoginMode(e)})),(0,s.Z)((0,qt.Z)(r),"setStep",(function(e){switch(e){case 0:r.props.enterSignupModeStep0();break;case 1:r.props.enterSignupModeStep1()}})),r.state={isEditing:!0},r}return(0,dt.Z)(n,[{key:"renderErrorMsg",value:function(){var e=this,t=Object.keys(this.props.errors).filter((function(t){return e.props.errors[t]&&e.props.errors[t].message}));return(0,Kt.jsx)("div",{className:"glue-hidden-visually",role:"alert","aria-live":this.state.isEditing?"off":"assertive",children:t.length>0?(0,Kt.jsxs)("div",{children:[(0,Kt.jsx)("p",{children:_t.get("desktop.login.email.errorMessageA11y",t.length)}),(0,Kt.jsx)("ul",{children:t.map((function(t){return(0,Kt.jsx)("li",{children:e.props.errors[t].message},t)}))})]}):null})}},{key:"renderStep0",value:function(){var e=this,t=this.props,n=t.data,r=t.errors,o=t.isDisabled,i=t.onValidate;return(0,Kt.jsxs)("div",{children:[(0,Kt.jsx)(Wn,{name:"email",type:"email",label:_t.get("desktop.login.SignupEmail"),value:n.email,onChange:this.handleInputChange,isDisabled:o,error:r.email,onValidate:this.handleEmailValidate,onFocus:this.handleEmailFocus,isRequired:!0,autoFocus:!0,rightIcon:Pn.B}),(0,Kt.jsx)(Wn,{name:"password",type:"password",label:_t.get("desktop.login.CreateAPassword"),value:n.password,onChange:this.handleInputChange,minLength:8,isRequired:!0,isDisabled:o,error:r.password,onValidate:this.handlePasswordValidate,onFocus:this.handlePasswordFocus,onTogglePasswordVisibility:function(t){e.props.onInteraction("signup","click",t?"toggle-password-visibility-show":"toggle-password-visibility-hide")}}),(0,Kt.jsx)(Wn,{name:"name",label:_t.get("desktop.login.SignupName"),value:n.name,onChange:this.handleInputChange,isRequired:!0,isDisabled:o,error:r.name,onValidate:i,rightIcon:An.W,onFocus:this.handleNameFocus})]})}},{key:"renderStep1",value:function(){var e=this,t=this.props,n=t.data,r=t.errors,o=t.restrictions,i=t.isDisabled,a=t.onValidate,s=null;o.requires_marketing_opt_in_text?s=(0,Kt.jsx)("div",{className:"SignupForm__send-email-implicit",children:_t.get("desktop.login.SendEmailImplicitLabel")}):o.requires_marketing_opt_in&&(s=(0,Kt.jsx)("div",{className:"SignupForm__checkbox-container",children:(0,Kt.jsx)(lr,{name:"send-email",label:_t.get("desktop.login.SendEmailLabel"),onChange:this.handleSendEmailChange,isChecked:n.sendEmail,isDisabled:i})}));var u=[{label:_t.get("desktop.login.Female"),value:"female"},{label:_t.get("desktop.login.Male"),value:"male"}];return o.use_all_genders&&u.push({label:_t.get("desktop.login.NonBinary"),value:"neutral"}),o.use_other_gender&&u.push({label:_t.get("desktop.login.gender.Other"),value:"other"}),o.use_prefer_not_to_say_gender&&u.push({label:_t.get("desktop.login.gender.PreferNotToSay"),value:"prefer_not_to_say"}),(0,Kt.jsxs)("div",{children:[(0,Kt.jsx)(nr,{name:"birth-date",label:_t.get("desktop.login.WhatsYourSignupBirthDate"),value:n.birthDate,onChange:this.handleBirthDateChange,disabled:i,error:r.birthDate,onValidate:a,dateEndianness:o.date_endianness,minAge:o.minimum_age,autoFocus:!0,onFocus:function(){e.props.onInteraction("signup","click","input-birth-date")}}),(0,Kt.jsx)(ur,{showTitle:!0,name:"gender",label:_t.get("desktop.login.WhatsYourSignupGender"),options:u,value:n.gender,onChange:this.handleInputChange,disabled:i,error:r.gender,onValidate:a,onOptionFocus:this.handleGenderOptionFocus}),s,(0,Kt.jsx)(vr,{restrictions:o,error:r.agreeEula,disabled:i,onChange:this.handleAgreeEulaChange})]})}},{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.step;return(0,Kt.jsxs)("form",{onSubmit:this.handleSubmit,className:"SignupForm",children:[this.renderErrorMsg(),(0,Kt.jsx)(fr,{}),0===n?this.renderStep0():"",1===n?this.renderStep1():"",(0,Kt.jsx)(en.D,{type:"submit",disabled:t,id:"signup-button",onClick:this.handleSubmit,"data-ta-id":"signup-submit",fullWidth:!0,children:0===n?_t.get("desktop.login.Continue"):_t.get("desktop.login.SignupButton")}),0===n&&(0,Kt.jsxs)(Ht.Fragment,{children:[(0,Kt.jsx)(wr,{title:_t.get("desktop.login.SignupOr")}),(0,Kt.jsx)(Sr,{})]}),(0,Kt.jsx)(jn.o,{onClick:this.handleBack,children:_t.get("desktop.login.Back")}),0===n&&(0,Kt.jsx)("h3",{className:"FooterFormText",children:(0,Kt.jsx)("a",{className:"FooterFormText__NoUnderline",href:"#",id:"login-link",onClick:this.handleLogin,dangerouslySetInnerHTML:{__html:_t.get("desktop.login.AlreadyOnSpotifyLogin")}})})]})}}]),n}(Ht.PureComponent);(0,s.Z)(Cr,"defaultProps",{errors:{},data:{},step:0});const xr=(0,f.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,email:e.signup.email,errors:e.signup.errors,data:e.signup.formData}}),(function(e){return{signup:function(t){return e(Bt.signup(t))},enterLoginMode:function(){return e(Bt.enterLoginMode())},enterSignupModeStep0:function(){return e(Bt.enterSignupModeStep0())},enterSignupModeStep1:function(){return e(Bt.enterSignupModeStep1())},updateData:function(t){return e(Bt.updateSignupData(t))},validateEmail:function(){return e(Bt.validateField("email"))},validatePassword:function(){return e(Bt.validateField("password"))},enterWelcomeMode:function(){return e(Bt.enterWelcomeMode())},clearAllErrors:function(){return e(Bt.clearAllErrors())},onValidate:function(t,n){if(n){var r=n.code||n,o={birthDate:{incomplete:_t.get("desktop.login.birthDate.incomplete"),invalid:_t.get("desktop.login.birthDate.invalid")},password:{valueMissing:_t.get("desktop.login.password.valueMissing"),tooShort:_t.get("desktop.login.password.tooShort")},email:{valueMissing:_t.get("desktop.login.email.valueMissing"),typeMismatch:_t.get("desktop.login.email.typeMismatch")},name:{valueMissing:_t.get("desktop.login.name.valueMissing")},gender:{valueMissing:_t.get("desktop.login.gender.valueMissing")},agreeEula:{notAccepted:_t.get("desktop.login.agreeEula.notAccepted")}};e(Bt.validateFieldFailure(t,{code:r,message:o[t]&&o[t][r]||""}))}else e(Bt.validateFieldSuccess(t))},onInteraction:function(t,n,r,o,i){return e(Bt.interaction(t,n,r,o,i))}}}))(Cr);function Fr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Pr=function(e){(0,Gt.Z)(n,e);var t=Fr(n);function n(){return(0,lt.Z)(this,n),t.apply(this,arguments)}return(0,dt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.step;if(!e.restrictions)return(0,Kt.jsx)(zt,{delay:2e3});var n=0===t?_t.get("desktop.login.SignupHeroText"):_t.get("desktop.login.SignupAlmostDone");return(0,Kt.jsxs)("main",{className:"Signup","data-testid":"signup","aria-labelledby":"signup-form-title",id:"signup","data-ta-id":"signup-form",children:[(0,Kt.jsx)("h1",{className:"HeroText",id:"signup-form-title",children:n}),(0,Kt.jsx)(xr,{step:t})]})}}]),n}(Ht.PureComponent);const Ar=(0,f.$j)((function(e){return{isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions}}))(Pr);n(41631);function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Tr=function(e){(0,Gt.Z)(n,e);var t=jr(n);function n(){var e;(0,lt.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleChange=e.handleChange.bind((0,qt.Z)(e)),e}return(0,dt.Z)(n,[{key:"handleChange",value:function(){this.props.isDisabled||this.props.onChange(!this.props.isActive)}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isDisabled,r=e.labelId,o=e.taId;return(0,Kt.jsxs)("div",{className:In()("GlueToggle",{"GlueToggle--is-active":t,"GlueToggle--is-disabled":n}),children:[(0,Kt.jsx)("input",{type:"checkbox",name:r,id:r,className:"glue-hidden-visually",onChange:this.handleChange,checked:t,disabled:n,"data-ta-id":o}),(0,Kt.jsx)("div",{className:"GlueToggle__toggle",onClick:this.handleChange,"aria-hidden":"true",children:(0,Kt.jsx)("div",{className:"GlueToggle__toggle-inner"})})]})}}]),n}(Ht.PureComponent);function Ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}Tr.defaultProps={isActive:!1,isDisabled:!1,onChange:function(){}};var Nr=function(e){(0,Gt.Z)(n,e);var t=Ir(n);function n(){return(0,lt.Z)(this,n),t.apply(this,arguments)}return(0,dt.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.label,r=e.checked,o=e.disabled,i=e.onChange,a="".concat(t,"-field");return(0,Kt.jsxs)("div",{className:"FormToggle",children:[(0,Kt.jsx)("label",{htmlFor:a,"data-ta-id":"remember-me-label",children:n}),(0,Kt.jsx)(Tr,{labelId:a,isActive:r,onChange:i,taId:"remember-me-slider",isDisabled:o})]})}}]),n}(Ht.PureComponent);function Rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Mr=function(e){(0,Gt.Z)(n,e);var t=Rr(n);function n(e){var r;return(0,lt.Z)(this,n),r=t.call(this,e),(0,s.Z)((0,qt.Z)(r),"handleForgotPasswordLinkClick",(function(){r.props.onInteraction("login","click","reset-password")})),r.state={username:r.props.username,password:"",rememberMe:!0},["handleSubmit","handleUsernameChange","handleUsernameFocus","handlePasswordChange","handlePasswordFocus","handleRememberMeChange"].forEach((function(e){r[e]=r[e].bind((0,qt.Z)(r))})),r}return(0,dt.Z)(n,[{key:"handleUsernameChange",value:function(e){var t=e.target;this.setState({username:t.value})}},{key:"handleUsernameFocus",value:function(){this.props.onInteraction("login","click","input-email")}},{key:"handlePasswordChange",value:function(e){var t=e.target;this.setState({password:t.value})}},{key:"handlePasswordFocus",value:function(){this.props.onInteraction("login","click","input-password")}},{key:"handleRememberMeChange",value:function(){this.setState({rememberMe:!this.state.rememberMe})}},{key:"handleSubmit",value:function(e){e&&e.preventDefault();var t=this.state.username.trim(),n=this.state,r=n.password,o=n.rememberMe,i=$t();this.props.onInteraction("login","click","login-email",null,i),t&&r?this.props.login({username:t,password:r,rememberMe:o},!1,i):t?r||this.props.onInteraction("login","view","show-error-empty-password",null,i):this.props.onInteraction("login","view","show-error-empty-email",null,i)}},{key:"render",value:function(){var e=this.props.isDisabled;return(0,Kt.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,Kt.jsx)("h3",{className:"glue-hidden-visually",children:_t.get("desktop.login.LoginWithEmailTitle")}),(0,Kt.jsx)(fr,{}),(0,Kt.jsx)(Wn,{name:"username",label:_t.get("desktop.login.LoginUsernameOrEmail"),value:this.state.username||"",onChange:this.handleUsernameChange,onFocus:this.handleUsernameFocus,isDisabled:e,autoFocus:!0,noValidate:!0,rightIcon:Pn.B}),(0,Kt.jsx)(Wn,{name:"password",type:"password",label:_t.get("desktop.login.LoginPassword"),value:this.state.password,onChange:this.handlePasswordChange,onFocus:this.handlePasswordFocus,isDisabled:e,noValidate:!0}),(0,Kt.jsx)("a",{className:"LoginForm__reset-password",href:"https://www.spotify.com/redirect/password-reset",target:"_new",onClick:this.handleForgotPasswordLinkClick,children:_t.get("desktop.login.forgotPassLink")}),(0,Kt.jsx)(Nr,{name:"remember-me",label:_t.get("desktop.login.RememberMeLabel"),checked:this.state.rememberMe,onChange:this.handleRememberMeChange,disabled:e}),(0,Kt.jsx)("button",{type:"submit",className:"button button-white LoginForm__login-button",disabled:e,id:"login-button","data-ta-id":"login-button",children:_t.get("desktop.login.LoginButton")})]})}}]),n}(Ht.PureComponent);const Zr=(0,f.$j)((function(e){return{isDisabled:!!e.login.loginInProgress,username:e.login.username}}),(function(e){return{login:function(t,n,r){return e(Bt.login(t,n,r))},onInteraction:function(t,n,r,o,i){return e(Bt.interaction(t,n,r,o,i))}}}))(Mr);function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Gr=function(e){(0,Gt.Z)(n,e);var t=Br(n);function n(){return(0,lt.Z)(this,n),t.apply(this,arguments)}return(0,dt.Z)(n,[{key:"componentWillUnmount",value:function(){this.props.clearErrors()}},{key:"handleSignup",value:function(){var e=$t();this.props.enterSignupMode(e),this.props.onInteraction("login","click","open-page-signup",null,e)}},{key:"getSignupLink",value:function(){var e=this;return(0,Kt.jsx)("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:function(){return e.handleSignup()},"data-ta-id":"signup-link",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.DontHaveAnAccountSignup")}})}},{key:"render",value:function(){var e=this.props.isDisabled;return(0,Kt.jsxs)("main",{className:"Login","data-testid":"login","aria-labelledby":"login-form-title",id:"login","data-ta-id":"login-form",children:[(0,Kt.jsx)("h1",{className:"HeroText",id:"login-form-title",children:_t.get("desktop.login.LoginHeroText")}),(0,Kt.jsx)(Zr,{}),(0,Kt.jsx)(wr,{title:_t.get("desktop.login.SignupOr")}),(0,Kt.jsx)(yr,{method:"facebook",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithFacebook")}),(0,Kt.jsx)(yr,{method:"google",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithGoogle")}),(0,Kt.jsx)(yr,{method:"apple",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithApple")}),(0,Kt.jsx)("h3",{className:"FooterFormText",children:this.getSignupLink()})]})}}]),n}(Ht.PureComponent);const Wr=(0,f.$j)((function(e){return{isDisabled:!!e.login.loginInProgress}}),(function(e){return{enterSignupMode:function(t){return e(Bt.enterSignupMode(t))},onInteraction:function(t,n,r,o,i){return e(Bt.interaction(t,n,r,o,i))},onSocialButtonClick:function(t){var n=$t();e(Bt.loginWithAccounts(t,n)),e(Bt.interaction("login","click","login-".concat(t),null,n))},clearErrors:function(){return e(Bt.loginClearErrors())}}}),(function(e,t){return Ur(Ur(Ur({},e),t),{},{onSocialButtonClick:function(e){t.onSocialButtonClick(e)}})}))(Gr);function Vr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Hr=function(e){(0,Gt.Z)(n,e);var t=Vr(n);function n(){return(0,lt.Z)(this,n),t.apply(this,arguments)}return(0,dt.Z)(n,[{key:"render",value:function(){var e="signup"===this.props.operationUsed?_t.get("desktop-auth.login.redirecting-to-browser-signup"):_t.get("desktop-auth.login.redirecting-to-browser-login");return(0,Kt.jsx)("main",{children:(0,Kt.jsx)("h1",{className:"HeroText __redirect",children:e})})}}]),n}(Ht.PureComponent);const Kr=(0,f.$j)((function(e){return{operationUsed:e.experimentWebAuthReducer.operationUsed}}))(Hr);n(97274);var Yr=n(79544);const zr="mpdBa62OP4Fr5wvCsa89",qr="acVhMt5pELcXQyLaaPuV",Jr="AavUTirpKSAHapguSAy0",Xr="SkbGMKYv49KtJNB5XxdX",$r="qfjicQPaTTPrLWJWRxMQ";var Qr=function(e){var t=e.id,n=e.type,r=e.placeHolder,o=e.inputRef,i=e.handleOnChange;return(0,Kt.jsx)("input",{type:n||"text",id:t,"data-testid":t,className:Xr,placeholder:r,ref:o,onChange:i})},eo=function(e){var t=e.children,n=e.label;return(0,Kt.jsx)(Yr.c,{label:n,className:$r,children:t})},to=n(19496),no=n.n(to);const ro="zrvvPyoxE6wQNqnu0yWA",oo="jmu6DFPvhxRl0wSfmv2O";var io,ao=function(e){var t=e.value,n=e.id,r=e.children,o=e.disabled,i=e.onSelect,a=e.className,u=e.dir;return(0,Kt.jsx)("span",{className:a,children:(0,Kt.jsx)("select",{className:In()(ro,(0,s.Z)({},oo,"Safari"===no().parse(window.navigator.userAgent).browser.name)),value:null==t?void 0:t.toString(),id:n,disabled:o,onBlur:function(){},onChange:function(e){i(e.target.value)},dir:u,children:r})})},so=(n(81285),(0,Ht.createContext)(void 0)),uo=function(e){var t=e.children,n=(0,Ht.useState)(!1),r=(0,on.Z)(n,2),o=r[0],i=r[1],a=(0,Ht.useState)(new Set),s=(0,on.Z)(a,2),u=s[0],c=s[1],l=(0,Ht.useCallback)((function(e,t){c((function(n){if(n.has(e)===t)return n;var r=new Set(n);return t?r.add(e):r.delete(e),r}))}),[]),d=u.size>0;return(0,Kt.jsx)(so.Provider,{value:{sectionMatch:o,setSectionMatch:i,sectionContainsMatch:d,setSectionFilterMatchQueryValue:l},children:t})},co=((0,n(97678).Ue)((function(e){return{lastFilterState:"",lastFilteredUri:"",setLastState:function(t,n){e({lastFilterState:t,lastFilteredUri:n})}}})),(0,Ht.createContext)({setFilter:function(){throw new Error("setFilter must be used within a FilterProvider")},filter:""}));n(46794);!function(e){e.UPDATE="update"}(io||(io={}));n(53987),n(27676),n(84437),n(2840),n(6201),n(85704);function lo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return po(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return po(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function po(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fo=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),ho=/[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,go=/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/,vo=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/;function mo(e){return null!==e&&ho.test(e)}function yo(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||mo(e))}function bo(e){return null!==e&&go.test(e)}function _o(e){return null!==e&&vo.test(e)}var Eo=function(){function e(t,n,r){if((0,lt.Z)(this,e),n<0||r<0||n+r>t.length)throw new RangeError;this.data=t,this.offset=n,this.length=r,this.position=0}return(0,dt.Z)(e,[{key:"toString",value:function(){return this.data.slice(this.offset,this.offset+this.length).join("")}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t<0||n>this.length)throw new RangeError;var r=this.offset+t,o=n-t;return new e(this.data,r,o)}},{key:"nextCodePoint",value:function(){return this.position===this.length?null:this.data[this.offset+this.position++]}}],[{key:"from",value:function(t){var n=Array.from(t.normalize("NFC"));return new e(n,0,n.length)}}]),e}();function ko(e){var t;do{t=e.nextCodePoint()}while(null!==t&&mo(t)||bo(t));return t}function So(e,t){var n=ko(e),r=ko(t);if(null===r)return{offset:0,length:0};for(var o=e.offset+e.position-1,i=e.offset+e.position;;){if(null===n&&null===r)return{offset:o,length:i-o};if(null===r)return{offset:o,length:i-o};if(null===n)return null;if(0!==fo.compare(n,r))return null;i=e.offset+e.position,n=ko(e),r=ko(t)}}function Do(e,t){var n,r,o;do{r=e.position,n=e.nextCodePoint()}while(null!==n&&mo(n));if(null!=t&&t.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){var i=n;r=e.position;do{o=e.position,n=e.nextCodePoint()}while(null!==n&&n!==i);return null===n&&r===o?null:e.slice(r,o)}do{if(o=e.position,null!=t&&t.segmentCJKUnifieIdeographs&&_o(n))break;n=e.nextCodePoint()}while(null!==n&&!yo(n));return null===n&&r===o?null:e.slice(r,o)}function wo(e){return Do(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function Oo(e){return Do(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Co(e,t){for(var n=[],r=Oo(e);null!==r;r=Oo(e)){var o=So(r,t.slice());null===o?null===(o=So(e.slice(r.offset),t.slice()))||n.push(o):n.push(o)}return n}function xo(e,t){return e.offset===t.offset&&e.length===t.length}var Fo=function(e,t){return"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e){for(var t=Eo.from(e),n=[],r=wo(t);null!==r;r=wo(t)){for(var o=[],i=0;i<(arguments.length<=1?0:arguments.length-1);++i){var a,s=i+1<1||arguments.length<=i+1?void 0:arguments[i+1],u=lo(Co(Eo.from(s),r));try{for(u.s();!(a=u.n()).done;){var c=a.value;o.push({text:s,range:c})}}catch(e){u.e(e)}finally{u.f()}}if(0===o.length)return null;n.push.apply(n,(0,fe.Z)(o.filter((function(e,t,n){return e.range.length>0&&n.findIndex((function(t){return xo(e.range,t.range)}))===t}))))}return n.length>0?n:null}(e,t):"boolean"!=typeof e||e};const Po="c6TyNYOUJRIsjYZJZofy";function Ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function To(e){var t=e.children,n=e.filterMatchQuery,r=(0,Ht.useContext)(co).filter,o=function(){var e=(0,Ht.useContext)(so);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e}(),i=o.setSectionMatch,a=o.sectionContainsMatch,s=Fo(r,n);return(0,Ht.useEffect)((function(){i(s)}),[s,i]),s||a?(0,Kt.jsx)("div",{className:Po,children:t}):null}function Io(e){return(0,Kt.jsx)(uo,{children:(0,Kt.jsx)(To,jo({},e))})}n(16109);var No=n(27631),Ro=n.n(No);const Mo="M0E2Al6URHV3iyoDbvi_";var Zo=["searchWords","textToHighlight"];function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uo(e){var t=e.searchWords,n=e.textToHighlight,r=(0,pe.Z)(e,Zo);return 0===t.length||t.every((function(e){return!e}))?(0,Kt.jsx)(Kt.Fragment,{children:n}):(0,Kt.jsx)(Ro(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({highlightClassName:Mo,searchWords:t,textToHighlight:n,autoEscape:!0},r))}function Bo(e){var t=e.children,n=(0,Ht.useContext)(co).filter;return(0,Kt.jsx)(an.D,{as:"h2",variant:"cello",semanticColor:"textBase",children:(0,Kt.jsx)(Uo,{searchWords:[n],textToHighlight:t})})}var Go=n(21818);const Wo="gvcgOXnAiNKEe_z92_lw";function Vo(e){var t=e.onClick;return(0,Kt.jsx)(Go.P,{className:Wo,onClick:t,children:_t.get("settings.restartApp")})}var Ho=function(e,t,n){var r="".concat(e,":").concat(t);switch(n){case Et:r+="@http";break;case kt:r+="@socks4";break;case St:r+="@socks5"}return r},Ko=function(e){var t=e.addr,n=e.mode,r=e.pass,o=e.user,i=e.setValue,a=e.restartContainer,s=e.fullWidth,u=(0,Ht.useRef)(null),c=(0,Ht.useRef)(null),l=(0,Ht.useRef)(null),d=(0,Ht.useRef)(null),p=(0,Ht.useState)(""),f=(0,on.Z)(p,2),h=f[0],g=f[1],v=(0,Ht.useState)(""),m=(0,on.Z)(v,2),y=m[0],b=m[1],_=(0,Ht.useState)(!1),E=(0,on.Z)(_,2),k=E[0],S=E[1];(0,Ht.useEffect)((function(){var e=(null==t?void 0:t.split(/[:@]+/))||["",""],n=(0,on.Z)(e,2),r=n[0],o=n[1];g(r),b(o),u.current&&(u.current.value=r),c.current&&(c.current.value=o)}),[t]),(0,Ht.useEffect)((function(){d.current&&r&&(d.current.value=r.toString())}),[r]),(0,Ht.useEffect)((function(){l.current&&o&&(l.current.value=o.toString())}),[o]);var D=(0,Ht.useCallback)((function(e){var t=e.target,r=Ho(t.value,y,n||0);g(t.value),i("network.proxy.addr",r),S(!0)}),[n,y,i]),w=(0,Ht.useCallback)((function(e){var t=e.target,r=Ho(h,t.value,n||0);b(t.value),i("network.proxy.addr",r),S(!0)}),[n,h,i]),O=(0,Ht.useCallback)((function(e){var t=e.target;i("network.proxy.user",t.value),S(!0)}),[i]),C=(0,Ht.useCallback)((function(e){var t=e.target;i("network.proxy.pass",t.value),S(!0)}),[i]),x=0!==n&&1!==n,F=n!==kt;return(0,Kt.jsxs)(Io,{filterMatchQuery:_t.get("desktop.settings.proxy.title"),children:[(0,Kt.jsx)(Bo,{children:_t.get("desktop.settings.proxy.title")}),(0,Kt.jsxs)("div",{className:In()(qr,s?Jr:null),children:[(0,Kt.jsx)(eo,{label:_t.get("desktop.settings.proxy.type"),children:(0,Kt.jsx)(ao,{id:"network.proxy.mode",value:n,onSelect:function(e){var t=parseInt(e,10);i("network.proxy.mode",t),S(!0)},children:wt.map((function(e){var t=e.enumKey,n=e.enumValue;return(0,Kt.jsx)("option",{value:n,"data-testid":t,children:Dt[t]?Dt[t].label():""},t)}))})}),x?(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsxs)("div",{className:zr,children:[(0,Kt.jsx)(eo,{label:_t.get("desktop.settings.proxy.host"),children:(0,Kt.jsx)(Qr,{id:"network.proxy.host",handleOnChange:D,placeHolder:_t.get("desktop.settings.proxy.host"),inputRef:u})}),(0,Kt.jsx)(eo,{label:_t.get("desktop.settings.proxy.port"),children:(0,Kt.jsx)(Qr,{id:"network.proxy.port",type:"number",handleOnChange:w,placeHolder:_t.get("desktop.settings.proxy.port"),inputRef:c})})]}),(0,Kt.jsxs)("div",{className:F?zr:void 0,children:[(0,Kt.jsx)(eo,{label:_t.get("desktop.settings.proxy.user"),children:(0,Kt.jsx)(Qr,{id:"network.proxy.user",handleOnChange:O,placeHolder:_t.get("desktop.settings.proxy.user"),inputRef:l})}),F?(0,Kt.jsx)(eo,{label:_t.get("desktop.settings.proxy.pass"),children:(0,Kt.jsx)(Qr,{id:"network.proxy.pass",handleOnChange:C,placeHolder:_t.get("desktop.settings.proxy.pass"),type:"password",inputRef:d})}):null]})]}):null,k&&(0,Kt.jsx)("div",{children:(0,Kt.jsx)(Vo,{onClick:a})})]})]})};function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zo=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const qo=(0,f.$j)((function(e){return{settings:{proxy:e.settings.proxy}}}),(function(e){return{fetchProxySettings:function(){e(Bt.fetchProxySettings())},updateProxySettings:function(t){e(Bt.updateProxySettings(t))},restartClient:function(){e(Bt.restartClient())}}}))((function(e){var t=e.settings,n=void 0===t?{proxy:{mode:0,address:"",username:"",password:""}}:t,r=e.fetchProxySettings,o=void 0===r?function(){}:r,i=e.updateProxySettings,a=void 0===i?function(){}:i,u=e.restartClient,c=void 0===u?function(){}:u;(0,Ht.useEffect)((function(){o()}),[o]);var l=(0,Ht.useCallback)((function(e,t){if(function(e){return!!zo.includes(e)}(e)){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.proxy);switch(e){case"network.proxy.mode":r.mode=t;break;case"network.proxy.addr":r.address=t;break;case"network.proxy.user":r.username=t;break;case"network.proxy.pass":r.password=t}a(r)}return Promise.resolve()}),[n,a]);return(0,Kt.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,Kt.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:_t.get("desktop.login.PreferencesLink")}),(0,Kt.jsx)(Ko,{mode:n.proxy.mode,addr:n.proxy.address,user:n.proxy.username,pass:n.proxy.password,setValue:l,restartContainer:c,fullWidth:!0})]})}));function Jo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var Xo=function(e){(0,Gt.Z)(n,e);var t=Jo(n);function n(e){var r;return(0,lt.Z)(this,n),(r=t.call(this,e)).handleSettingsClick=r.goToSettingsPage.bind((0,qt.Z)(r)),r.handleBackToLoginClick=r.handleBackToLoginClick.bind((0,qt.Z)(r)),r}return(0,dt.Z)(n,[{key:"handleSignupClick",value:function(){var e=this.props,t=e.openSignupPage,n=e.onInteraction,r=$t();t(r),n("login/welcome","click","open-page-signup",null,r)}},{key:"handleBackToLoginClick",value:function(e){e.preventDefault(),this.props.openLoginPage(),this.props.onInteraction(this.props.mode,"click","back-to-login")}},{key:"goToSettingsPage",value:function(e){e.preventDefault(),this.props.openSettingsPage(),this.props.onInteraction(this.props.mode,"click","open-page-settings")}},{key:"renderPreferencesLink",value:function(){return(0,Kt.jsx)("a",{className:"Footer__link",href:"#",onClick:this.handleSettingsClick,"data-ta-id":"login-footer-settings",children:_t.get("desktop.login.PreferencesLink")})}},{key:"renderBackToLoginLink",value:function(){return(0,Kt.jsx)("a",{className:"Footer__link",href:"#",onClick:this.handleBackToLoginClick,"data-ta-id":"login-footer-settings-back-to-login",children:_t.get("desktop.login.Back")})}},{key:"renderTryAgain",value:function(){var e=this;return(0,Kt.jsxs)(Kt.Fragment,{children:[(0,Kt.jsx)("span",{children:_t.get("desktop-auth.login.not-seeing-browser")})," ",(0,Kt.jsx)("a",{href:"#",onClick:function(){return e.props.tryAgainHandler()},children:_t.get("desktop-auth.login.try-again")})]})}},{key:"renderSignupLink",value:function(){var e=this;return(0,Kt.jsx)("a",{className:"Footer__NoUnderline",href:"#",id:"signup-link",onClick:function(){return e.handleSignupClick()},"data-ta-id":"welcome-signup-link",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.DontHaveAnAccountSignup")}})}},{key:"renderRussiaLegalFormLink",value:function(){return(0,Kt.jsx)("div",{children:(0,Kt.jsx)("a",{className:"Footer__link",href:"https://support.spotify.com/ru-ru/contact-spotify-legal-form/",target:"_blank",rel:"noopener",children:"Форма для Ваших обращений"})})}},{key:"renderMode",value:function(e,t){return"login"===e||"welcome"===e&&t?this.renderPreferencesLink():"settings"===e?this.renderBackToLoginLink():"open-browser"===e?this.renderTryAgain():"welcome"===e?this.renderSignupLink():null}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.country,r=e.isAuthOnWebEnabled;return(0,Kt.jsxs)("footer",{className:"Footer",role:"contentinfo",children:[this.renderMode(t,r),"RU"===n&&this.renderRussiaLegalFormLink()]})}}]),n}(Ht.PureComponent);const $o=(0,f.$j)((function(e){var t;return{country:null===(t=e.signup.restrictions)||void 0===t?void 0:t.country}}),(function(e){return{tryAgainHandler:function(){e(Bt.abortLoginWithAccounts()),e(Bt.enterWelcomeMode())},openLoginPage:function(){e(Bt.enterLoginMode())},openSignupPage:function(t){return e(Bt.enterSignupMode(t))},openSettingsPage:function(){return e(Bt.enterSettingsMode())},onInteraction:function(t,n,r,o,i){return e(Bt.interaction(t,n,r,o,i))}}}))(Xo);function Qo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var ei=function(e){(0,Gt.Z)(n,e);var t=Qo(n);function n(){return(0,lt.Z)(this,n),t.apply(this,arguments)}return(0,dt.Z)(n,[{key:"render",value:function(){return(0,Kt.jsxs)("header",{className:"Header",children:[(0,Kt.jsx)("h1",{className:"glue-hidden-visually",children:"Spotify"}),(0,Kt.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]})}}]),n}(Ht.PureComponent),ti=n(61141),ni=n(25879),ri=n(60647),oi=(0,n(38970).JP)({name:"enableAuthOnWeb",description:"Property to enable experiment to use web authentication for Desktop application.",default:!1});function ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Vt.Z)(e);if(t){var o=(0,Vt.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,Wt.Z)(this,n)}}var ai=function(e){(0,Gt.Z)(n,e);var t=ii(n);function n(){return(0,lt.Z)(this,n),t.apply(this,arguments)}return(0,dt.Z)(n,[{key:"renderFakeWebPlayer",value:function(){return(0,Kt.jsxs)("div",{className:"fakeWebPlayer",children:[(0,Kt.jsx)("aside",{}),(0,Kt.jsxs)("footer",{children:[(0,Kt.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,Kt.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,Kt.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,Kt.jsx)("main",{children:(0,Kt.jsx)("div",{className:"fakeWebPlayer__content"})})]})}},{key:"renderMode",value:function(e,t,n,r){return"settings"===e?(0,Kt.jsx)(qo,{}):n?(0,Kt.jsx)(Fn,{eventSender:r}):"welcome"===e?(0,Kt.jsx)(rn,{}):"signup"===e?(0,Kt.jsx)(Ar,{step:t}):"login"===e?(0,Kt.jsx)(Wr,{}):"open-browser"===e?(0,Kt.jsx)(Kr,{}):null}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.mode,r=e.loggedIn,o=e.previousMode,i=e.throbberDelay,a=e.signupStep,s=e.previousSignupStep,u=e.isAuthOnWebEnabled,c=e.eventSender;if(t||!n)return(0,Kt.jsx)(zt,{delay:i});if(r)return null;var l=o?"__".concat(n," __").concat(o,"-to-").concat(n):"";return"signup"===n&&Number.isInteger(s)&&(l+=" __signup_step_".concat(s,"_to_").concat(a)),(0,Kt.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":n,children:[this.renderFakeWebPlayer(),(0,Kt.jsx)("div",{className:"App__content ".concat(l),children:(0,Kt.jsx)(ni.Z,{mode:"in-out",children:(0,Kt.jsx)(ti.Z,{timeout:{appear:0,enter:0,exit:650},children:(0,Kt.jsxs)("div",{className:"App__modal ".concat(l),children:[(0,Kt.jsx)(ei,{}),this.renderMode(n,a,u,c),(0,Kt.jsx)($o,{mode:n,isAuthOnWebEnabled:u})]})},l)})})]},"main1")}}]),n}(Ht.Component);(0,s.Z)(ai,"defaultProps",{throbberDelay:0,transitionLeaveTimeout:0});var si=(0,ri.yS)({isAuthOnWebEnabled:oi});const ui=(0,f.$j)((function(e){return{mode:e.app.mode,previousMode:e.app.previousMode,signupStep:e.signup.step,previousSignupStep:e.signup.previousStep,loading:!!e.login.loading,loggedIn:!!e.login.loggedIn,throbberDelay:e.login.throbberDelay,transitionLeaveTimeout:e.login.redirectDelay}}))(si(ai));var ci=n(20762),li=n(61958);const di=function(e){return function(t){return function(n){var r=t(n);switch(n.type){case Bt.START_APP:e.dispatch(Bt.getSignupRestrictions()),!m.getItem("lastUsername")?e.dispatch(Bt.enterWelcomeMode()):e.dispatch(Bt.enterLoginMode());break;case Bt.LOGIN_FAIL:var o=e.getState();if(n.loginType===Bt.LOGIN_TYPE_AUTOLOGIN){var i=o.app.mode;"welcome"===i?e.dispatch(Bt.enterWelcomeMode()):"login"===i?e.dispatch(Bt.enterLoginMode()):"signup"===i&&e.dispatch(Bt.enterSignupMode())}else{if("open-browser"===o.app.mode){var a=n.errorData,s=gn(a.errorCategory,a.errorCode,a.errorReference);"desktop_login_accounts"===a.errorCategory&&4===a.errorCode&&(s="signup"===o.experimentWebAuthReducer.operationUsed?_t.get("desktop-auth.login.signup-time-out"):_t.get("desktop-auth.login.login-time-out")),s?e.dispatch(Bt.enterWelcomeMode(s)):e.dispatch(Bt.enterWelcomeMode())}}break;case Bt.ENTER_SIGNUP_MODE:var u=e.getState().signup.restrictions;u?!1===u.is_country_launched&&e.dispatch(Bt.countryNotLaunched()):e.dispatch(Bt.getSignupRestrictions());break;case Bt.SIGNUP_RESTRICTIONS_SUCCESS:!1===n.restrictions.is_country_launched&&e.dispatch(Bt.countryNotLaunched());break;case Bt.SIGNUP_FAILURE:(n.errors.email||n.errors.password||n.errors.displayname)&&e.dispatch(Bt.enterSignupModeStep0());break;case Bt.COUNTRY_NOT_LAUNCHED:e.dispatch(Bt.openSignupPage(!0))}return r}}};function pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const fi=function(e){var t=new xn(e);return function(){return function(e){return function(n){var r=e(n);switch(n.type){case Bt.ENTER_LOGIN_MODE:t.logPageView({page:"login"});break;case Bt.LOGIN_SUCCESS:n.loginType===Bt.LOGIN_TYPE_EMAIL&&t.logAction({page:"login",action_type:"view",action_intent:"show-success-login-email"});break;case Bt.LOGIN_FAIL:n.loginType===Bt.LOGIN_TYPE_EMAIL&&n.errorData&&3===n.errorData.errorCode&&t.logAction({page:"login",action_type:"view",action_intent:"show-error-invalid-credential"});break;case Bt.ENTER_SIGNUP_MODE:t.logPageView({page:"signup"});break;case Bt.ENTER_SIGNUP_MODE_STEP_0:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-one"});break;case Bt.ENTER_SIGNUP_MODE_STEP_1:t.logAction({page:"signup",action_type:"view",action_intent:"show-signup-step-two"});break;case Bt.SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-signup-email"});break;case Bt.SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-signup-email",item_id:n.errors&&Object.keys(n.errors).join("|")});break;case Bt.FACEBOOK_SIGNUP_SUCCESS:t.logAction({page:"signup",action_type:"view",action_intent:"show-success-authentication-facebook"});break;case Bt.FACEBOOK_SIGNUP_FAILURE:t.logAction({page:"signup",action_type:"view",action_intent:"show-error-authentication-facebook",item_id:n.errorData&&"".concat(n.errorData.errorCode," - ").concat(n.errorData.errorDescription)});break;case Bt.ENTER_WELCOME_MODE:t.logPageView({page:"login/welcome"});break;case Bt.ENTER_SETTINGS_MODE:t.logPageView({page:"login/settings"});break;case Bt.INTERACTION:t.logAction({page:n.page,action_type:n.interactionType,action_intent:n.intent,item_id:n.itemId,action_hash:n.actionHash});break;case Bt.VALIDATE_FIELD_FAILURE:if(n.error){var o=n.field,i=n.error.code,a=null,u=null;"valueMissing"===i?a="show-error-empty-".concat(o):["incomplete","invalid","typeMismatch","tooShort"].includes(i)?a="show-error-format-".concat(o):(a="show-error-".concat(o),u=n.error.message||""),null!==a&&t.logAction(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({page:"signup",action_type:"view",action_intent:a},u?{item_id:u}:{}))}}return r}}}},hi=function(e){window.location.href=e},gi=function(){return function(e){return function(t){var n,r=e(t);return t.redirectTo?("xpui"!==t.redirectTo||(n="spotify:app:xpui",t.redirectDelay?setTimeout((function(){hi(n)}),t.redirectDelay):hi(n)),r):r}}};function vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yi={errorMessage:null};const bi=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yi,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Bt.ENTER_SIGNUP_MODE:return mi(mi({},t),{},{previousMode:t.mode,mode:"signup"});case Bt.ENTER_LOGIN_MODE:case Bt.COUNTRY_NOT_LAUNCHED:return mi(mi({},t),{},{previousMode:t.mode,mode:"login"});case Bt.ENTER_WELCOME_MODE:return mi(mi({},t),{},{previousMode:t.mode,mode:"welcome",errorMessage:null!==(e=n.errorMessage)&&void 0!==e?e:null});case Bt.ENTER_SETTINGS_MODE:return mi(mi({},t),{},{previousMode:t.mode,mode:"settings"});default:return t}};function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ki(e){return e.type===Bt.SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS}var Si={proxy:{mode:0,address:"",username:"",password:""}};const Di=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Si,t=arguments.length>1?arguments[1]:void 0;return ki(t)?Ei(Ei({},e),{},{proxy:{mode:t.data.mode,address:t.data.address,username:t.data.username,password:t.data.password}}):e};function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ci={step:0,isAttempting:!1,isSuccessful:void 0,errors:{},errorData:{},validated:{},formData:{name:"",email:"",password:"",birthDate:{day:void 0,month:void 0,year:void 0},gender:void 0,sendEmail:void 0,shareData:void 0,agreeEula:!1},restrictions:void 0};const xi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ci,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Bt.ENTER_SIGNUP_MODE_STEP_0:return Oi(Oi({},e),{},{previousStep:e.step,step:0});case Bt.ENTER_SIGNUP_MODE_STEP_1:return Oi(Oi({},e),{},{previousStep:e.step,step:1});case Bt.SIGNUP_RESTRICTIONS_SUCCESS:return Oi(Oi({},e),{},{formData:Oi(Oi({},e.formData),{},{sendEmail:!!t.restrictions.requires_marketing_opt_in_text||void 0,agreeEula:!!t.restrictions.pretick_eula}),restrictions:t.restrictions});case Bt.SIGNUP_RESTRICTIONS_FAILURE:return Oi(Oi({},e),{},{errorData:t.error});case Bt.SIGNUP_ATTEMPT:return Oi(Oi({},e),{},{isAttempting:!0,errorData:null});case Bt.SIGNUP_SUCCESS:return Oi(Oi({},e),{},{isAttempting:!0,isSuccessful:!0,errorData:null});case Bt.SIGNUP_FAILURE:return Oi(Oi({},e),{},{isAttempting:!1,isSuccessful:!1,errors:t.errors,errorData:null});case Bt.FACEBOOK_SIGNUP_ATTEMPT:return Oi(Oi({},e),{},{errorData:null,errors:{}});case Bt.FACEBOOK_SIGNUP_FAILURE:return Oi(Oi({},e),{},{errorData:t.errorData});case Bt.VALIDATE_FIELD_ATTEMPT:return Oi(Oi({},e),{},{errors:Oi(Oi({},e.errors),{},(0,s.Z)({},t.field,void 0))});case Bt.VALIDATE_FIELD_FAILURE:return Oi(Oi({},e),{},{errors:Oi(Oi({},e.errors),{},(0,s.Z)({},t.field,t.error)),validated:Oi(Oi({},e.validated),{},(0,s.Z)({},t.field,!1))});case Bt.VALIDATE_FIELD_SUCCESS:return Oi(Oi({},e),{},{errors:Oi(Oi({},e.errors),{},(0,s.Z)({},t.field,void 0)),validated:Oi(Oi({},e.validated),{},(0,s.Z)({},t.field,!0))});case Bt.UPDATE_SIGNUP_DATA:for(var n={},r=0,o=Object.keys(t.data);r<o.length;r++){var i=o[r];n[i]=void 0}return Oi(Oi({},e),{},{errors:Oi(Oi({},e.errors),n),formData:Oi(Oi({},e.formData),t.data)});case Bt.CLEAR_ALL_ERRORS:return Oi(Oi({},e),{},{errors:{}});default:return e}};function Fi(e){var t=(0,ci.MT)((0,ci.UY)({app:bi,login:O,settings:Di,signup:xi}),void 0,(0,ci.md)(li.Z,di,fi(e),gi));return t.subscribe((function(){var e=t.getState();e.login.username&&localStorage.setItem(_,e.login.username),e.login.utmParameters&&localStorage.setItem(k,JSON.stringify(e.login.utmParameters))})),t}var Pi=n(39557),Ai=n(30811);function ji(e){e}function Ti(){var e=(0,Ai.qy)({providers:{endpoints:(0,Ai.uG)(),token:function(){return null}}});return e.connect(),e}var Ii=n(95234),Ni=n(93938),Ri=function(e,t){var n=e.event_sender_context_information;return[(0,Ni.UY)({version_code:n.client_version_int,version_string:n.client_version_string}),(0,Ni.jx)(t),(0,Ni.IE)(n.installation_id),(0,Ni.CF)({device_id:n.device_id,device_manufacturer:n.device_manufacturer,device_model:n.device_model,os_version:n.os_version,platform_type:n.platform_type})]},Mi=function(e,t,n){return(0,Ii.mi)({transport:t,suppressPersist:false,context:Ri(e,n)})},Zi=n(17470),Li=n(57757);function Ui(){return(Ui=(0,u.Z)(l().mark((function e(){var t,n,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=[window.__spotify.locale,at.en];case 1:if(!(t<n.length)){e.next=18;break}return r=n[t],e.prev=3,e.next=6,fetch("i18n/".concat(r,".json")).then((function(e){return e.json()}));case 6:return o=e.sent,_t.setLocale(r),_t.setDictionary(o),e.abrupt("return");case 12:e.prev=12,e.t0=e.catch(3);case 15:t++,e.next=1;break;case 18:throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.");case 19:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}function Bi(){return(Bi=(0,u.Z)(l().mark((function e(){var t,n,r,o,i,a,u,c,v,m,y,b;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ji(r=Ti()),o=Mi(window.__spotify,r,"65b708073fc0480ea92a077233ca87bd"),i=Fi(o),g.attach(),g.update(),h.attach(),a=document.location.search,u=new RegExp("\\?param=error-code\\".concat(encodeURIComponent("="),"([0-9]+)"),"i"),window.addEventListener("message",(function(e){"critical-update-error"===e.data&&i.dispatch(Bt.loginFailed({errorCode:e.data}))})),c=a.match(u),a&&c&&(v=+c[1],i.dispatch(Bt.loginFailed({errorCode:v}))),m="linux",window.navigator.platform.startsWith("Mac")&&(m="mac"),window.navigator.platform.startsWith("Win")&&(m="windows"),document.body.classList.add("body-container--".concat(m)),d.render((0,Kt.jsx)(p.zj,{children:(0,Kt.jsx)(f.zt,{store:i,children:(0,Kt.jsx)(ri.nD,{resolver:Li.L,context:{username:null},options:{clientId:"client-desktop-ui-app-login",timeout:5e3,transport:r,eventSender:o,installationId:null===(t=window.__spotify.event_sender_context_information)||void 0===t?void 0:t.installation_id},children:(0,Kt.jsx)(Ht.Suspense,{fallback:null,children:(0,Kt.jsx)(ui,{eventSender:o})})})})}),document.getElementById("main")),i.dispatch(Bt.startApp()),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),n={},(0,s.Z)(n,Pi.PLATFORM_UNKNOWN,"body-container--unknown-os"),(0,s.Z)(n,Pi.PLATFORM_MAC,"body-container--mac"),(0,s.Z)(n,Pi.PLATFORM_WINDOWS,"body-container--windows"),y=n,b=(0,Pi.getPlatform)(),document.body.classList.add(y[b]),(0,Zi.wm)("UI init phase is done for login");case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,Zi.hb)(),function(){return Ui.apply(this,arguments)}().then((function(){return Bi.apply(this,arguments)}))},39557:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM_MAC:()=>o,PLATFORM_UNKNOWN:()=>r,PLATFORM_WINDOWS:()=>i,getPlatform:()=>u,isMac:()=>a,isWindows:()=>s});n(26870),n(53987),n(93019),n(719);var r=Symbol("PLATFORM_UNKNOWN"),o=Symbol("PLATFORM_MAC"),i=Symbol("PLATFORM_WINDOWS");function a(){return window.navigator.platform.startsWith("Mac")}function s(){return window.navigator.platform.startsWith("Win")}function u(){return a()?o:s()?i:r}},43489:(e,t)=>{var n=!1;t.update=function(){},t.attach=function(){if(!n){n=!0;var e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)}},t.detach=function(){n&&(n=!1,document.documentElement.removeAttribute("lang"))}},20385:(e,t,n)=>{var r,o=n(90967),i=n(24047);n(98618),n(93019),n(40905),n(58549),n(32868),n(3726),n(89004),n(25750);var a=n(39557),s=a.getPlatform,u=a.PLATFORM_UNKNOWN,c=a.PLATFORM_MAC,l=a.PLATFORM_WINDOWS,d=!1,p="always-visible",f=0,h=(i(r={},u,"linux"),i(r,c,"mac"),i(r,l,"windows"),r),g=h[u];function v(){var e=o(document.querySelectorAll("*")),t=[],n=["scroll","auto","overlay"];e.forEach((function(e){var r=window.getComputedStyle(e),o=r.overflowX,i=r.overflowY;n.includes(o)&&t.push({node:e,property:"overflow-x"}),n.includes(i)&&t.push({node:e,property:"overflow-y"})}));var r=document.createElement("style");r.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();var i="data-scrollbar-fix-".concat(++f,"-id"),a=0;t.forEach((function(e){var t=e.node,n=e.property;if(t!==document.body){var o=++a;t.setAttribute(i,o),r.innerHTML+="\n    [".concat(i,'="').concat(o,'"] { ').concat(n,": hidden !important; }")}})),document.head.appendChild(r),setTimeout((function(){document.head.removeChild(r),t.forEach((function(e){e.node.removeAttribute(i)}))}),0)}t.performScrollBarFix=v,t.update=function(){},t.attach=function(){if(!d){d=!0;var e=window.__spotify&&window.__spotify.scroller_style;p="overlay"===e?"overlay":"always-visible";var t=s();g=h[t],"always-visible"===p||"mac"!==g?(document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add("scrollbar-style-visible-".concat(g))):(document.body.classList.remove("scrollbar-style-visible-".concat(g)),document.body.classList.add("scrollbar-style-when-scrolling-mac")),window.addEventListener("message",(function(e){"set_active"===e.data.name&&e.data.active&&v()}))}},t.detach=function(){d&&(d=!1,f=0)}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,r.amdO={},e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],s=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={535:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,u]=n,c=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r)}for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,[569],(()=>r(97906)));o=r.O(o)})();
//# sourceMappingURL=login.js.map