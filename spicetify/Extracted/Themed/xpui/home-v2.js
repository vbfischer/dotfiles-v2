"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7704],{81729:(e,t,n)=>{n.r(t),n.d(t,{SKELETON_CARDS_COUNT:()=>Et,SKELETON_SHELVES_COUNT:()=>_t,SKELETON_SHORTCUTS_COUNT:()=>kt,default:()=>Bt});var r=n(46220),i=(n(47408),n(15970),n(93019),n(56110),n(59496)),o=n(84875),a=n.n(o),s=n(60647),c=n(36393),l=n(22056),u=n(86417),d=n(14942),m=(n(2840),n(24255)),f=n(54465),h=(n(25750),n(33208),n(3726),n(79075),n(26870),n(86978),n(98618),n(40905),n(79410),n(21105),n(72753),n(24896)),p=n(58032),v=n(76253),j=n(16020),x=n(62629),g=(n(95410),n(14965)),y=n(16843),b=n(7013),O=n(21274),P=n(47018),S=n(75458),w=n(35407),C=n(39664),N=n(79498),k=n(54167),_=n(21322),E=n(69873),T=n(4899);const D="view-homeShortcutsGrid-shortcuts",B="view-homeShortcutsGrid-grid",I="view-homeShortcutsGrid-shortcutLink",L="view-homeShortcutsGrid-shortcut",M="view-homeShortcutsGrid-draggable",U="view-homeShortcutsGrid-imageContainer",Z="view-homeShortcutsGrid-imageWrapper",A="view-homeShortcutsGrid-image",F="view-homeShortcutsGrid-main",H="view-homeShortcutsGrid-nameWrapper",J="view-homeShortcutsGrid-name",R="EzRmGRncgnv1zFgF4dqE",W="bPmmKmSPLKMhtJSaUJRX",z="vpQWUBWS_lXRLZMRJT7w",G="GSv7K805J9Jw7LB9tn2A",q="view-homeShortcutsGrid-PlayButtonContainer",Y="s9c9x_mJq197U2hBzGtV";var K=n(4637),V=(0,i.memo)((function(e){var t,n,r,i=e.item,o=(0,_._)(i.uri),a=null!==(t=i.duration_ms)&&void 0!==t?t:0,s=(0,T.$o)(i.uri),c=s.isPlaying,l=s.isActive,u=(0,E.z)(1e4,(function(e){var t;return(null===(t=e.item)||void 0===t?void 0:t.uri)===i.uri})),m=(0,d.Z)(u,1)[0],f=null!==(n=null===(r=i.resume_point)||void 0===r?void 0:r.resume_position_ms)&&void 0!==n?n:0,h=c||l?m:f,p=Math.round(100/(a/h)),v=o===k.Om.YES,j=a&&h>0;return v||j?(0,K.jsxs)("div",{className:z,children:[v?(0,K.jsx)(C.E,{iconSize:16,semanticColor:"textSubdued"}):null,j?(0,K.jsx)(N.k,{className:G,value:p,semanticColor:"essentialBase"}):null]}):null})),X=n(92053),Q=n(33892),$=n(2292),ee=n(12323),te=n(64094),ne=n(68765),re=n(13034),ie=n(71789),oe=n(20786),ae=(0,i.memo)((function(e){var t=e.images,n=void 0===t?[]:t,r=e.fallbackIcon,i=void 0===r?g.U:r,o=(0,oe.X)(n);return(0,K.jsx)("div",{className:U,children:(0,K.jsx)("div",{className:Z,children:(0,K.jsx)(ie.E,{className:A,src:null==o?void 0:o.url,loading:"lazy",testid:"shortcut-image",children:(0,K.jsx)(i,{"aria-hidden":!0})})})})})),se=n(21586),ce=n(46596),le=n(3777),ue=i.memo((function(e){var t,n,r=e.index,o=e.item,s=e.fallbackIcon,c=e.showPlayButton,l=e.extraContent,u=e.onContextMenu,d=void 0===u?function(){}:u,f=e.onTouchStart,h=void 0===f?function(){}:f,p=e.onTouchEnd,v=void 0===p?function(){}:p,j=(0,X.s0)(),g=(0,ce.o)(),y=(0,x.WQ)(),b=y.setColorFromUri,O=y.resetColor,S=y.clearColor,w=(0,te.G3)(o.uri,o.release_date,null===(t=o.resume_point)||void 0===t?void 0:t.resume_position_ms,null===(n=o.resume_point)||void 0===n?void 0:n.fully_played),C=(0,re.fU)($.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:r,uri:o.uri}}),N=C.spec,k=C.logger,_=(0,ne.n)({uri:o.uri},{featureIdentifier:"home",referrerIdentifier:"home"}),E=_.isPlaying,T=_.isActive,D=_.togglePlay;var B=(0,i.useCallback)((function(){g({targetUri:o.uri,intent:"navigate",type:"click"});var e=N.hitUiNavigate({destination:o.uri});k.logInteraction(e),j((0,P.EC)(o.uri).toURLPath(!0))}),[o.uri,k,j,g,N]),U=(0,i.useCallback)((function(){b(o.uri)}),[o.uri,b]);(0,i.useEffect)((function(){return function(){S()}}),[S]);var Z=(0,re.Wi)(N),A=(0,se.O1)([o.uri],o.name);return(0,K.jsx)("div",{ref:Z,className:L,onContextMenu:d,onTouchStart:h,onTouchEnd:v,onMouseEnter:U,onMouseLeave:O,children:(0,K.jsxs)("div",{className:M,onDragStart:A,children:[(0,K.jsx)(ae,{images:o.images,fallbackIcon:s}),(0,K.jsxs)("div",{className:F,children:[(0,K.jsxs)("div",{className:H,children:[(0,K.jsxs)("div",{className:J,children:[w&&(0,K.jsx)(te.Rd,{className:W}),(0,K.jsx)(le.Link,{to:o.uri,onClick:B,title:o.name,children:(0,K.jsx)(Q.D,{as:"p",variant:"balladBold",className:R,children:o.name})})]}),l||null]}),c&&(0,K.jsx)("div",{className:a()(q,(0,m.Z)({},Y,E)),children:(0,K.jsx)(ee.f,{isPlaying:E,onClick:function(){g({targetUri:o.uri,intent:E?"pause":"play",type:"click"});var e,t=N.playButtonFactory();e=E?t.hitPause({itemToBePaused:o.uri}):T?t.hitResume({itemToBeResumed:o.uri}):t.hitPlay({itemToBePlayed:o.uri});var n=k.logInteraction(e);D({loggingParams:n})}})})]}),(0,K.jsx)("div",{onClick:B,className:I})]})})})),de=n(74964),me=n(41001),fe=n(79459),he=n(33639),pe=n(56080);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=i.memo((function(e){return(0,P.zO)(e.item.uri)?(0,K.jsx)(ue,je(je({},e),{},{fallbackIcon:g.U})):(0,S.MW)(e.item.uri)?(0,K.jsx)(w._,{menu:(0,K.jsx)(S.XL,{}),children:(0,K.jsx)(ue,je(je({},e),{},{fallbackIcon:g.U}))}):(0,K.jsx)(w._,{menu:(0,K.jsx)(he.X,{uri:e.item.uri}),children:(0,K.jsx)(ue,je(je({},e),{},{fallbackIcon:g.U}))})})),ge=i.memo((function(e){return(0,K.jsx)(w._,{menu:(0,K.jsx)(de.Y,{uri:e.item.uri}),children:(0,K.jsx)(ue,je(je({},e),{},{fallbackIcon:y.c}))})})),ye=i.memo((function(e){return(0,K.jsx)(w._,{menu:(0,K.jsx)(me.m,{uri:e.item.uri}),children:(0,K.jsx)(ue,je(je({},e),{},{fallbackIcon:b.a}))})})),be=i.memo((function(e){return(0,K.jsx)(w._,{menu:(0,K.jsx)(pe.M,{uri:e.item.uri}),children:(0,K.jsx)(ue,je(je({},e),{},{fallbackIcon:O.J,showPlayButton:!1}))})})),Oe=i.memo((function(e){return e.item.podcast?(0,K.jsx)(be,{index:e.index,shouldSetBackgroundColor:e.shouldSetBackgroundColor,item:e.item.podcast,showPlayButton:e.showPlayButton}):(0,K.jsx)(w._,{menu:(0,K.jsx)(fe.k,{uri:e.item.uri}),children:(0,K.jsx)(ue,je(je({},e),{},{fallbackIcon:O.J,extraContent:(0,K.jsx)(V,je({},e))}))})}));var Pe=n(60834),Se=n(23742);const we="J6UEDIqMSJhYlwGoeUZB",Ce="ZjFf4lVC48DSryAjP9qB";function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=i.memo((function(e){var t=(0,Se.x)(),n=ke(ke({},e.item),t);return(0,K.jsx)(ue,ke(ke({},e),{},{item:n,fallbackIcon:function(){return(0,K.jsx)("div",{className:we,children:(0,K.jsx)(Pe.P,{iconSize:32,className:Ce})})}}))})),Ee=n(32318),Te=n(67008);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie=24,Le=270;function Me(e){if(null===e)return{cssProperties:{"--min-column-width":"".concat(Le,"px"),"--item-height":"".concat(80,"px"),"--column-gap":"".concat(Ie,"px"),"--row-gap":"".concat(16,"px")},showPlayButton:!0};var t=e.offsetWidth,n=t<600?200:Le,r=Math.min(Math.floor((t+Ie)/(n+Ie)),3),i=t>=858?80:64,o=64===i?12:16,a=(t-(r-1)*Ie)/r>=Le;return{cssProperties:{"--min-column-width":"".concat(n,"px"),"--item-height":"".concat(i,"px"),"--column-gap":"".concat(Ie,"px"),"--row-gap":"".concat(o,"px")},showPlayButton:a}}function Ue(){var e=(0,i.useRef)(null),t=(0,i.useState)(Me(null)),n=(0,d.Z)(t,2),r=n[0],o=n[1],a=(0,i.useCallback)((function(){null!==e.current&&o(Me(e.current))}),[]),s=(0,i.useCallback)((function(t){e.current=t,a()}),[a]);return(0,p.a)((function(){return a()})),[r,s]}var Ze=function(e){if(null!==e&&"object"===(0,f.Z)(e)){var t=e,n=t.type,r=t.name;return n===j.p.YOUR_EPISODES&&"string"==typeof r}return!1},Ae=i.memo((function(e){var t,n,r=e.title,o=e.tagline,a=e.items,s=(0,x.WQ)().fetchMultipleColors,c=!(0,Ee.k)(),u=null!=r?r:(t=(new Date).getHours(),n=l.ag.get("home.evening"),t>=5&&t<12?n=l.ag.get("home.morning"):t>=12&&t<18&&(n=l.ag.get("home.afternoon")),n),m=Ue(),f=(0,d.Z)(m,2),h=f[0],p=f[1];return(0,i.useEffect)((function(){var e=(null==a?void 0:a.map(x.lh))||[];s(e)}),[a,s]),c||null==a||!a.length?null:(0,K.jsxs)("section",{className:D,"aria-label":u,ref:p,children:[(0,K.jsx)(Te.r,{title:u,titleVariant:"alto",tagline:o}),(0,K.jsx)("div",{className:B,style:h.cssProperties,children:a.filter((function(e,t){return Ze(e)||!e.error})).filter((function(e,t){return t<6})).map((function(e,t){if(Ze(e))return(0,K.jsx)(_e,{index:t,item:e,showPlayButton:h.showPlayButton,shouldSetBackgroundColor:0===t},"".concat(t,"-").concat(e.uri));var n=function(e){var t=((0,P.EC)(e)||{}).type;switch(t){case P.JM.ARTIST:return ye;case P.JM.ALBUM:case P.JM.COLLECTION_ALBUM:return ge;case P.JM.PLAYLIST:case P.JM.PLAYLIST_V2:return xe;case P.JM.SHOW:return be;case P.JM.EPISODE:return Oe;case P.JM.COLLECTION:return xe;default:return console.warn("Unable to resolve entity shortcut from ".concat(e,' of type "').concat(t||"unknown",'"')),be}}(e.uri);return(0,K.jsx)(n,{index:t,item:e,showPlayButton:h.showPlayButton,shouldSetBackgroundColor:0===t},"".concat(t,"-").concat(e.uri))}))})]})})),Fe=function(e){return(0,K.jsx)(h.L,{onError:function(e){(0,v.vK)(e,"HomeShortcutsGrid")},children:(0,K.jsx)(Ae,Be({},e))})},He=n(54151),Je=n(74140);const Re="zUf7jtv9GPOKC1jYO5TO",We="T8QLel3PoQTgJUpGYj7Q";var ze=(0,i.memo)((function(e){var t=e.isLoading,n=(0,He.h)("shimmer");return(0,K.jsx)("div",{className:U,children:(0,K.jsx)("div",{ref:n,className:a()(Z,(0,m.Z)({},We,t))})})})),Ge=(0,i.memo)((function(e){var t=e.isLoading;return(0,K.jsx)("div",{className:a()(L,Re),"data-testid":"skeleton-shortcut",children:(0,K.jsxs)("div",{className:M,children:[(0,K.jsx)(ze,{isLoading:t}),(0,K.jsx)("div",{className:F,children:(0,K.jsx)(Je.C,{as:"p",variant:"balladBold",className:R,isLoading:t})})]})})}));const qe="v7dc5ekmeBiAYnLzV8oT";var Ye=(0,i.memo)((function(e){var t=e.shortcutCount,n=Ue(),i=(0,d.Z)(n,2),o=i[0],a=i[1];return(0,K.jsxs)("section",{className:D,ref:a,children:[(0,K.jsx)(Je.C,{as:"h2",variant:"alto",className:qe,charCount:25,isLoading:!0}),(0,K.jsx)("div",{className:B,style:o.cssProperties,children:(0,r.Z)(new Array(t).keys()).slice(0,6).map((function(e,t){return(0,K.jsx)(Ge,{isLoading:!0},t)}))})]})})),Ke=n(27293),Ve=n(66365),Xe=n(71379),Qe=n(99350),$e=n(67505),et=n(74977),tt=n(6731),nt=n(3873),rt=n(88769),it=n(26533),ot=n.n(it),at=(n(84196),n(27586),n(53987),n(76796)),st=n(23731),ct=(n(66410),n(93983)),lt=n(47807),ut=n(85388),dt=n(37875);var mt=function(e){var t,n,r=e.spec,o=e.section,a=e.index,c=(0,s.W6)(ut.ty,{loadingValue:!1})?ct.N:lt.q;return(0,i.useMemo)((function(){return o.sectionItems.items.some((function(e){return(0,dt.d)(e.content)}))}),[o.sectionItems])?(0,K.jsx)(re.Nh,{spec:r.shelvesFactory(),children:(0,K.jsx)(c,{total:o.sectionItems.totalCount,seeAllUri:o.uri,pageId:o.uri,title:null!==(t=null===(n=o.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:"",index:a,id:o.uri,children:o.sectionItems.items.map(dt.x).filter((function(e){return!!e}))})}):null},ft=n(41009),ht=function(e){var t,n,r=e.spec,i=e.section,o=e.index;return(0,K.jsx)(re.Nh,{spec:r.shelvesFactory(),children:(0,K.jsx)(ft.default,{title:null!==(t=null===(n=i.data.title)||void 0===n?void 0:n.text)&&void 0!==t?t:void 0,showAll:!1,index:o})})},pt=n(90457),vt=function(e){var t=e.spec,n=e.greeting,r=e.section;return(0,K.jsx)(re.Nh,{spec:t.shortcutsFactory(),children:(0,K.jsx)(Fe,{items:r.sectionItems.items.map(pt.lh),title:null!=n?n:void 0})})},jt=n(67654),xt=(0,i.lazy)((0,rt.Z)(ot().mark((function e(){var t,r;return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(1814),n.e(8228)]).then(n.bind(n,37152));case 2:return t=e.sent,r=t.FeatureActivationShelf,e.abrupt("return",{default:r});case 5:case"end":return e.stop()}}),e)})))),gt=function(e){var t,n=e.spec,r=e.greeting,o=e.section,a=e.index;switch(null===(t=o.data)||void 0===t?void 0:t.__typename){case"HomeGenericSectionData":return(0,K.jsx)(mt,{spec:n,section:(0,jt.f)(o,o.data),index:a});case"HomeFeatureActivationSectionData":return(0,at.wW)()?(0,K.jsx)(i.Suspense,{fallback:null,children:(0,K.jsx)(xt,{})}):null;case"HomeShortsSectionData":return(0,K.jsx)(vt,{spec:n,greeting:r,section:(0,jt.f)(o,o.data)});case"HomeRecentlyPlayedSectionData":return(0,K.jsx)(ht,{spec:n,section:(0,jt.f)(o,o.data),index:a});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case"HomeOnboardingSectionDataV2":return null;case"HomeYourDJSectionData":var s=(0,jt.f)(o,o.data),c=s.data,l=s.sectionItems.items[0];if("PlaylistResponseWrapper"===l.content.__typename&&"Playlist"===l.content.data.__typename){var u,d,m,f=l.content.data;return(0,K.jsx)(S.KE,{spec:n,shelfTitle:null!==(u=null===(d=c.title)||void 0===d?void 0:d.text)&&void 0!==u?u:"",title:f.name,description:null!==(m=f.description)&&void 0!==m?m:""})}return null;case null:case void 0:return null;default:return(0,st._)(o.data),null}},yt=function(e){var t=e.spec,n=e.greeting,r=e.container,o=(0,re.fU)(tt.createDesktopHomeFeatureActivationShelfEventFactory,{}),a=o.spec,s=o.logger;return(0,i.useEffect)((function(){(0,nt.wW)()&&s.logImpression(a.impressionElementFactory().impression())}),[a,s]),(0,K.jsx)(K.Fragment,{children:r.sections.items.map((function(e,r){return(0,K.jsx)(gt,{spec:t,greeting:n,section:e,index:r},"".concat(r,"-").concat(e.uri))}))})},bt=n(76027),Ot=n(23940),Pt=(0,i.memo)((function(e){var t=e.cardCount;return(0,K.jsx)(Ot.X,{isLoading:!0,children:(0,r.Z)(new Array(t).keys()).map((function(e,t){return(0,K.jsx)(bt.A,{isLoading:!0},t)}))})})),St=n(98668),wt=n(60037),Ct=function(){return(0,s.W6)(ut.Jw)===ut.pF.ONHOME?(0,K.jsx)(wt.w,{children:(0,K.jsx)(St.M,{onSearch:!1})}):null},Nt=n(18237),kt=6,_t=6,Et=6,Tt=(0,i.memo)((function(e){var t=e.shortcutCount,n=e.shelfCount,i=e.cardCount;return(0,K.jsx)("section",{"data-testid":"home-page",children:(0,K.jsx)("div",{className:Nt.Z.home,children:(0,K.jsxs)("div",{className:a()(Nt.Z.content,"contentSpacing"),children:[(0,K.jsx)(Ye,{shortcutCount:t}),(0,r.Z)(new Array(n).keys()).map((function(e,t){return(0,K.jsx)(Pt,{cardCount:i},t)}))]})})})})),Dt=function(e){var t,n,r=e.spec;(0,Ve.z)("home");var i=(0,$e.b3)({timeZone:(0,et.L7)()},{cacheTime:et.us,staleTime:et.fS}),o=i.data,s=i.error;if(i.loading)return(0,K.jsx)(Tt,{shortcutCount:kt,shelfCount:_t,cardCount:Et});if(null!==s)return(0,K.jsx)(Ke.h,{hasError:!0,errorMessage:l.ag.get("error.generic")});var c=null==o?void 0:o.home;return"HomeResponsePayload"!==(null==c?void 0:c.__typename)||0===c.sectionContainer.sections.totalCount||0===c.sectionContainer.sections.items.length?(0,K.jsx)(Ke.h,{hasError:!0,errorMessage:l.ag.get("error.generic")}):(0,K.jsx)("section",{"data-testid":"home-page",children:(0,K.jsx)("div",{className:Nt.Z.home,children:(0,K.jsx)("div",{className:a()(Nt.Z.content,"contentSpacing"),children:(0,K.jsx)(yt,{spec:r,greeting:null!==(t=null===(n=c.greeting)||void 0===n?void 0:n.text)&&void 0!==t?t:null,container:c.sectionContainer})})})})};const Bt=function(){var e=(0,re.fU)(c.createDesktopHomeEventFactory,{data:{identifier:"home",uri:"spotify:home"}}).spec,t=(0,s.W6)(ut.yg),n=(0,Qe.S)(t);return(0,K.jsx)(re.Nh,{spec:e,children:(0,K.jsxs)(Xe.q,{config:n,children:[(0,K.jsx)(u.$,{children:l.ag.get("page.generic-title")}),(0,K.jsx)(i.Suspense,{fallback:null,children:(0,K.jsx)(Ct,{})}),(0,K.jsx)(Dt,{spec:e})]})})}}}]);
//# sourceMappingURL=home-v2.js.map