"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{5797:(e,t,n)=>{n.d(t,{o:()=>a});var i=n(60647),r=n(85388);function a(){return{version:(0,i.W6)(r.GE)?2:1}}},87477:(e,t,n)=>{n.d(t,{p:()=>f,q:()=>l.q});n(79075),n(26870),n(33208),n(93019),n(86978),n(98618),n(40905),n(79410),n(21105),n(72753);var i=n(24255),r=n(14942),a=n(59496),s=n(77646),o=n(99654),l=n(97174),c=n(89634),u=n(46596),d=n(4637);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var m=a.memo((function(e){var t=e.uri,n=e.size,i=void 0===n?l.q.md:n,p=e.className,m=e.onClick,f=e.showUpsell,y=(0,o.Z)(t),h=(0,r.Z)(y,2),v=h[0],x=h[1],g=(0,s.I0)(),b=(0,u.o)(),j=(0,a.useCallback)((function(){b({targetUri:t,intent:v?"remove-from-library":"add-to-library",type:"click"}),x(!v),g(v?(0,c.SS)():(0,c.kK)())}),[b,t,v,x,g]);return(0,d.jsx)(l.o,{className:p,isFollowing:v,onFollow:j,onClick:m,uri:t,size:i,showUpsell:f})})),f=a.memo((function(e){return(0,d.jsx)(m,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}))},16518:(e,t,n)=>{n.r(t),n.d(t,{default:()=>gt});var i=n(14942),r=(n(26870),n(53987),n(25750),n(47408),n(15970),n(93019),n(27586),n(56110),n(4391),n(3761),n(30169),n(47785),n(68063),n(59496)),a=n(92053),s=n(60647),o=n(77250),l=n(6063),c=n(47018),u=n(22056),d=n(86417),p=n(44881),m=n(27293),f=n(88769),y=n(26533),h=n.n(y),v=n(21818),x=n(24255),g=(n(84196),n(79075),n(33208),n(86978),n(98618),n(40905),n(79410),n(21105),n(72753),n(5797)),b=n(38368),j=n(4637);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,x.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=(0,r.lazy)((function(){return n.e(7778).then(n.bind(n,97778))}));function T(e){var t=(0,b.m)(),n=(0,g.o)();return t?(0,j.jsx)(r.Suspense,{fallback:!0,children:(0,j.jsx)(C,k(k({reason:"Episode page"},n),e))}):null}const I="dpN5ViPOceUWNB5EQPHN",E="vBcxPq3E2okwgXOkVPEM",O="HCCBXwdFvq6omWW2hR0N",S="bJOPO5Zo7dpjSVDwEpSw",w="TXdDDpokVTyJzDEDWHHf",D="HaSbtEVJnxBsaJ5SRi0M",N="YldGldlfaI9myEGXQf9g",L="qJHVIpJn1vLPWsAKfTEZ",R="wSIzjkVlr0Zdy7di2vRm",U="hYS_K1NATGyWt6tCSRqQ",M="hVVaM4pF9arpQ8Nvn2a1",B="zf0Eac1LugsHUacz74Zf",F="TnNaqxbaI0hzhBQZ7wE0",A="zSw1lG1TNe_xm6KTqtCv",Z="MlEQDkXnjdKKJueJ9kkB",z="jg0xlyD1yjh0DPNG6eOg",_="QiHXpFb4dLZNOFe5gpp3";n(41631);var q,H=n(33892),W=n(82852),V=n(13034),K=n(42382),Y=n(85388),G=n(93711),J=function(e){var t=e.cardHeaderText,n=e.cardBodyText,i=e.buttonText,r=e.buttonTarget;return(0,s.W6)(Y.vp)?(0,j.jsxs)("div",{className:N,children:[(0,j.jsxs)("div",{className:L,children:[(0,j.jsx)(H.D,{variant:"balladBold",semanticColor:"textBase",children:t}),(0,j.jsx)(H.D,{semanticColor:"textBase",children:n})]}),(0,j.jsx)(K.D,{buttonSize:"sm",colorSet:"invertedLight",href:(0,c.EC)(r).toURLPath(!0),component:G.Z,children:i})]}):null},X=function(e){var t=e.areHTMLDescriptionsEnabled,n=e.contentInformation,i=e.description,a=e.hasDescription,s=e.htmlDescription,o=e.onExpanded,l=e.onTimeStampClick,c=e.playability,d=e.showHeader,p=void 0===d||d,m=e.spec,f=(0,V.$P)(),y=(a||n)&&p,h=(0,r.useCallback)((function(e){var t=m.readMoreButtonFactory();f.logInteraction(e?t.hitUiReveal():t.hitUiHide()),null==o||o()}),[m,f,o]);return(0,j.jsxs)(j.Fragment,{children:[y&&(0,j.jsx)(H.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:O,children:u.ag.get("episode.description-title")}),n&&(0,j.jsx)(J,{cardHeaderText:n.cardHeaderText,cardBodyText:n.cardBodyText,buttonText:n.buttonText,buttonTarget:n.buttonTarget}),a&&(0,j.jsx)(W.o,{className:E,onTimeStampClick:l,maxLines:4,onExpanded:h,content:(i||"").trim(),htmlContent:t&&s?s:void 0,enableTimestamps:c.playable})]})},Q=n(84875),$=n.n(Q),ee=n(34745),te=n(71916),ne=n(87278),ie=n(61872),re=n(79268),ae=n(8566);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}(q||(q={}));var se=r.memo((function(e){var t=e.transcriptSections,n=e.descriptionContent,a=e.transcriptContent,s=e.spec,o=(0,V.$P)(),l=(0,r.useState)(q.DESCRIPTION),c=(0,i.Z)(l,2),d=c[0],p=c[1],m=r.useContext(ae.VX).scrollNodeRef,f=(0,ee.YD)({threshold:[1],root:m.current,rootMargin:"-".concat(re.K1+1,"px 100000px 0px 100000px")}),y=f.ref,h=f.inView,v=(0,r.useRef)(null),g=(0,r.useCallback)((function(e){v.current=e,y(e)}),[y]);return(0,r.useEffect)((function(){var e,t,n=null===(e=v.current)||void 0===e||null===(t=e.parentElement)||void 0===t?void 0:t.offsetTop,i=null==m?void 0:m.current;if(n&&i){var r=n-re.K1;i.scrollTop>r&&i.scrollTo({top:r})}}),[m,d]),(0,j.jsx)(te.l,{list:(0,j.jsxs)(ne.F,{className:$()(Z,(0,x.Z)({},z,!h)),ref:g,children:[(0,j.jsx)(ie.c,{label:u.ag.get("web-player.episode.description"),sentenceCase:!0,active:d===q.DESCRIPTION,onClick:function(){var e=s.tabsFactory().descriptionTabButtonFactory().hitUiReveal();o.logInteraction(e),p(q.DESCRIPTION)},className:$()(_,(0,x.Z)({},R,d===q.DESCRIPTION))}),(0,j.jsx)(ie.c,{label:u.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===t,active:d===q.TRANSCRIPT,onClick:function(){var e=s.tabsFactory().transcriptTabButtonFactory().hitUiReveal();o.logInteraction(e),p(q.TRANSCRIPT)},className:$()(_,(0,x.Z)({},R,d===q.TRANSCRIPT))})]}),children:null===t||d===q.DESCRIPTION?n:a})})),oe=n(61741),le=n(18633),ce=(0,r.memo)((function(e){var t=e.transcriptSections,n=e.onTimeStampClick,i=e.episodeUri;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:M,children:(0,j.jsx)(H.D,{variant:"viola",semanticColor:"textBase",children:u.ag.get("web-player.episode.transcript.disclaimer")})}),t.map((function(e,t){var r="transcript-section-".concat(t);return(0,j.jsxs)("div",{className:U,children:[(0,j.jsx)("button",{className:B,onClick:function(){n(e.startMs,r)},children:(0,j.jsx)(oe.D,{id:r,targetURI:(0,c.EC)(i),fadeOut:!0,children:(0,j.jsx)(H.D,{variant:"finaleBold",semanticColor:"textSubdued",className:F,children:(0,le.m)(e.startMs)})})}),e.content.map((function(e,t){return(0,j.jsx)(H.D,{variant:"viola",semanticColor:"textBase",className:A,dir:"auto",children:e},"transcript-text-".concat(t))}))]},r)}))]})})),ue=(n(3726),n(73566),n(79494)),de=n(51841),pe=n(6928),me=n(23731),fe=n(93593),ye=n(42820),he=n(66712),ve=n(56868),xe=n(27951),ge=n(55540),be=n(23351);const je="OYehkMWcGJRKPkByp46K",Pe="uc1bXkrZqrCz0CMK4lBb",ke="qZeibBbA3SVClzEueYND";var Ce=function(e){var t,n=e.episodeUri,i=e.index,a=e.duration,s=e.start,o=e.stop,l=e.name,c=e.uri,d=e.artists,p=e.album,m=e.playable,f=(0,xe.k)({episodeUri:n,start:s,stop:o}),y=f.isActive,h=f.isPlaying,v=f.onClick,x=(0,r.useCallback)((function(e,t){v(t)}),[v]),g=(0,V.fU)(fe.createDesktopTrackListRowEventFactory,{data:{position:i,reason:"",uri:c}}).spec;return(0,j.jsx)(be.ZP,{value:"row",index:i,children:(0,j.jsx)(ge.xV,{trigger:"right-click",action:"open",menu:(0,j.jsx)(ye.$,{uri:c}),children:(0,j.jsxs)(ve.c,{uri:c,index:i,ariaRowIndex:i+1,dragMetadata:{name:l,createdBy:null!==(t=null==d?void 0:d[0].name)&&void 0!==t?t:""},onTriggerPlay:x,isActive:y,isPlayable:m,spec:g,children:[(0,j.jsxs)(he.vZ,{ariaColIndex:0,children:[(0,j.jsx)(he.Du,{uri:c,playAriaLabel:u.ag.get("tracklist.a11y.play",l,null==d?void 0:d[0].name),onClick:x,isPlaying:h,isActive:y,spec:g,children:(0,j.jsx)(he.km,{children:(0,j.jsx)("img",{className:Pe,src:p.image,alt:p.name})})}),(0,j.jsxs)(he.vm,{children:[(0,j.jsx)(he.Wh,{titleText:l,children:l}),(0,j.jsx)(he.K9,{children:(0,j.jsx)(he.T6,{artists:d,spec:g})})]})]}),(0,j.jsx)(he.UA,{ariaColIndex:1,children:(0,j.jsx)(he.BM,{uri:p.uri,name:p.name,spec:g,children:p.name})}),(0,j.jsxs)(he.mU,{ariaColIndex:2,children:[(0,j.jsx)(he.qS,{uri:c,spec:g}),(0,j.jsx)(he.A$,{duration:a}),(0,j.jsx)(he.Zv,{spec:g,menu:(0,j.jsx)(ye.$,{uri:c,artists:d}),label:u.ag.get("more.label.track",l,null==d?void 0:d[0].name)})]})]})})})};function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,x.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t,n){return e.reduce((function(e,i,r){return(r>0||t>0)&&e.push({type:"SPACER",id:"spacer-".concat(e.length)}),"MUSIC"===i.type?e.push(function(e,t,n){return{type:"MUSIC",index:t,uri:n.uri,episodeUri:e,start:n.start,stop:n.stop,duration:n.duration,name:n.track.name,artists:n.track.artists,album:n.track.album,playable:n.track.playable}}(n,r,i)):"TALK"===i.type&&e.push(function(e,t,n){return{type:"TALK",index:t,uri:e,title:n.title,subtitle:n.subtitle,start:n.start,stop:n.stop,duration:n.duration,showUri:n.show.uri,showName:n.show.name}}(n,r,i)),e}),[])}const Oe=function(e){var t=e.uri,n=e.segmentCount,i=(0,pe.G)(),a=(0,r.useCallback)(function(){var e=(0,f.Z)(h().mark((function e(r,a){var s,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Math.ceil(r/2),e.prev=1,e.next=4,i.getSegments(t,s,a);case 4:return o=e.sent,e.abrupt("return",{items:Ee(o,s,t),totalLength:2*n-1});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",{items:[],totalLength:0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),[n,i,t]),s=(0,r.useCallback)((function(e){switch(e.type){case"SPACER":return(0,j.jsx)("div",{className:ke},e.id);case"MUSIC":return(0,j.jsx)(Ce,Ie({},e),"".concat(t,"-").concat(e.index));case"TALK":return(0,j.jsx)(ue.t,Ie({},e),"".concat(t,"-").concat(e.index));default:return(0,me.U)(e)}}),[t]),o=u.ag.get("music_and_talk.in_this_episode");return(0,j.jsxs)("div",{children:[(0,j.jsx)(H.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:je,children:o}),(0,j.jsx)(de.Pv,{ariaLabel:o,hasHeaderRow:!0,rowPlaceholder:de.hU,columns:[de.QD.TITLE,de.QD.ALBUM_OR_SHOW,de.QD.DURATION],renderRow:s,fetchTracks:a,resolveUri:function(e){return"MUSIC"===e.type?e.uri:""},limit:50,nrTracks:2*n-1,testID:"music-and-talk-tracklist"})]})};var Se=n(99159),we=function(e){var t=e.areHTMLDescriptionsEnabled,n=e.contentInformation,a=e.description,s=e.hasDescription,o=e.hasMusicAndTalkSegements,l=e.htmlDescription,c=e.onExpanded,d=e.onDescriptionTimestampClick,p=e.onTranscriptTimestampClick,m=e.playability,y=e.segmentCount,x=e.showUrl,g=e.transcript,b=e.transcriptEnabled,P=e.uri,k=e.spec,C=(0,V.$P)(),I=(0,r.useMemo)((function(){return k.descriptionSectionFactory()}),[k]),E=(0,r.useMemo)((function(){return I.trackListFactory()}),[I]),O=(0,r.useState)(null),w=(0,i.Z)(O,2),D=w[0],N=w[1],L=(0,r.useCallback)(function(){var e=(0,f.Z)(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Se.l)(t);case 2:n=e.sent,N(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);(0,r.useEffect)((function(){g&&g.length>0&&L(g[0].cdnUrl)}),[L,g]);var R=function(e){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(X,{hasDescription:s,contentInformation:n,onTimeStampClick:d,onExpanded:c,description:a,areHTMLDescriptionsEnabled:t,htmlDescription:l,playability:m,showHeader:e,spec:I}),o&&(0,j.jsx)(V.Nh,{spec:E,children:(0,j.jsx)(Oe,{segmentCount:y,uri:P})}),x&&(0,j.jsx)(v.P,{buttonSize:"sm",className:S,href:x,component:G.Z,onClick:function(){C.logInteraction(I.allEpisodesLinkFactory().hitUiNavigate({destination:x}))},children:u.ag.get("episode.see_all_episodes")}),(0,j.jsx)(T,{uri:P})]})};return(0,j.jsx)(j.Fragment,{children:b&&g&&(null==g?void 0:g.length)>0?(0,j.jsx)(se,{transcriptSections:D,descriptionContent:R(!1),transcriptContent:(0,j.jsx)(ce,{transcriptSections:D||[],onTimeStampClick:p,episodeUri:P}),spec:k}):R(!0)})},De=n(66787),Ne=n(38402),Le=n(6236),Re=n(73075),Ue="activation-trigger-mme",Me=function(e){var t=e.episodeUri,n=e.showUri,i=e.isLocked,r=e.isPlaying,a=e.isPlayDisabled,s=e.playButtonPlayLabel,o=e.playButtonPauseLabel,l=e.onClick,u=(0,Re.E)();if((0,Ne.g)())return(0,j.jsx)(Le.JM,{size:Le.qE.lg,onClick:l,isPlaying:r,disabled:a,locked:i,ariaPlayLabel:s,ariaPauseLabel:o});var d=(0,j.jsx)(De.l,{showUri:n,enabled:i,renderInline:!1,children:(0,j.jsx)(Le.JM,{size:Le.qE.lg,onClick:l,isPlaying:r,disabled:a,locked:i,ariaPlayLabel:s,ariaPauseLabel:o})});return u?(0,j.jsx)(oe.D,{id:Ue,targetURI:(0,c.EC)(t),fadeOut:!0,children:d}):d},Be=n(31540),Fe=n(46596),Ae=n(6145),Ze=n(38391),ze=n(58964),_e=n(68765),qe=n(4899),He=n(64384),We=n(64237),Ve=n(38662),Ke=n(34728),Ye=n(77646),Ge=n(27848),Je=n(17913),Xe=n(87477),Qe=n(97921),$e=n(14571),et=n(79459),tt=n(20031),nt=n(80505),it=n(13215),rt=n(22508),at=n(69873),st=n(44170),ot=n(41314),lt=function(e){var t,n,a,s,o=e.episode,l=e.onPlayEpisode,c=e.isPlaying,d=e.isActive,p=e.isFullyPlayed,m=e.setIsFullyPlayed,f=e.backgroundColor,y=e.isLocked,h=e.spec,v=o.uri,x=o.playedState,g=o.contentRating,b=o.playability,P=(0,V.$P)(),k=(0,Ye.I0)(),C=(0,at.z)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===v})),T=(0,i.Z)(C,1)[0],I=(0,He.Y)((function(e){return null==e?void 0:e.duration})),E=(0,ot.r)({contentRating:null==g?void 0:g.label}).badges,O=(0,r.useCallback)((function(e){!b.playable&&E.nineteen&&(e.stopPropagation(),k((0,Ge.RM)(v||"")))}),[v,b.playable,E.nineteen,k]),S=(0,r.useCallback)((function(){var e=h.contextMenuButtonFactory().hitUiReveal();P.logInteraction(e)}),[P,h]),D=(0,r.useCallback)((function(e,t){(0,tt.l7)(t,h.downloadButtonFactory(),P,v)}),[P,h,v]),N=(0,r.useCallback)((function(e){var t=h.saveButtonFactory();P.logInteraction(e?t.hitLike({itemToBeLiked:v}):t.hitRemoveLike({itemNoLongerLiked:v}))}),[P,h,v]),L=!y&&!o.playability.playable,R=u.ag.get("tracklist.a11y.play",o.name,null===(t=o.podcast)||void 0===t?void 0:t.name),U=u.ag.get("tracklist.a11y.pause",o.name,null===(n=o.podcast)||void 0===n?void 0:n.name),M=null===(a=o.podcast)||void 0===a?void 0:a.uri;return(0,j.jsxs)(Je.o,{backgroundColor:f,children:[(0,j.jsxs)(Je.F,{children:[E.nineteen&&(0,j.jsx)(rt.X,{className:w,size:16}),(0,j.jsx)(st.E,{size:st.$.LARGE,fullyPlayed:p,durationMs:d&&I?I:o.duration.milliseconds,releaseDate:bt(null===(s=o.releaseDate)||void 0===s?void 0:s.isoString),resumePositionMs:x.playPositionMilliseconds,isPlaying:c,position:d&&T||void 0})]}),(0,j.jsxs)(Je.F,{children:[(0,j.jsx)("div",{onClick:O,children:(0,j.jsx)(Me,{episodeUri:o.uri,showUri:M,isLocked:y,onClick:function(){l(x.playPositionMilliseconds)},isPlaying:c,isPlayDisabled:L,playButtonPlayLabel:R,playButtonPauseLabel:U})}),!y&&(0,j.jsx)(Xe.p,{uri:o.uri,onClick:D}),(0,j.jsx)($e.w,{uri:o.uri,size:nt.q.md,onClick:N}),(0,j.jsx)(it.y,{onShow:S,menu:(0,j.jsx)(et.k,{uri:o.uri,sharingInfo:o.sharingInfo,showUri:M,contextUri:o.uri,isPlayed:p,onMarkAsPlayed:m}),children:(0,j.jsx)(Qe.z,{label:u.ag.get("more.label.context",o.name)})})]})]})},ct=n(18805),ut=n(53965),dt=n(99567),pt=n(3777),mt=n(35407),ft=n(64094);var yt=function(e){var t,n,i=e.episode,a=e.isFullyPlayed,s=e.setIsFullyPlayed,o=e.backgroundColor,l=e.spec,d=i.uri,p=i.name,m=i.sharingInfo,f=i.playedState,y=i.episodeType,h=i.releaseDate,v=(0,V.$P)(),x=function(e,t,n,i,r){var a=t===Ke.Wf.Episode;return(0,ft.G3)(e,i,n,r)?(0,j.jsx)(ft.Fg,{isMusicAndTalk:a}):a?u.ag.get("type.showEpisode"):u.ag.get("type.podcastEpisode")}(d,y||Ke.Wf.Unknown,f.playPositionMilliseconds,bt(null==h?void 0:h.isoString),f.state===Ke.sY.Completed),g=null===(t=i.podcast)||void 0===t?void 0:t.uri,b=function(e){var t=(0,c.EC)(e),n=(0,c.HB)((null==t?void 0:t.id)||"");return"/show/".concat(n)}(g),P=(0,r.useCallback)((function(){v.logInteraction(l.podcastLinkFactory().hitUiNavigate({destination:b}))}),[v,b,l]);return(0,j.jsxs)(ct.gF,{backgroundColor:o,children:[(0,j.jsx)(ut.W,{children:(0,j.jsx)(dt.i,{text:i.name,dragUri:d,dragLabel:i.name})}),(0,j.jsx)("div",{className:D,children:(0,j.jsx)(mt._,{menu:(0,j.jsx)(et.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:g,contextUri:i.uri,isPlayed:a,onMarkAsPlayed:s}),children:(0,j.jsx)(ct.Oe,{loading:"eager",name:i.name,images:i.coverArt,placeholderType:"episode",shape:ct.Kc.ROUNDED_CORNERS})})}),(0,j.jsxs)(ct.sP,{children:[(0,j.jsx)(ct.dy,{small:!0,uppercase:!0,children:x}),(0,j.jsx)(mt._,{menu:(0,j.jsx)(et.k,{uri:d,sharingInfo:m,showUri:g,contextUri:d,isPlayed:a,onMarkAsPlayed:s}),children:(0,j.jsx)(ct.xd,{dragUri:d,dragLabel:p,children:(0,j.jsx)("span",{"data-testid":"episodeTitle",children:p})})}),(0,j.jsx)(mt._,{menu:(0,j.jsx)(et.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:g,contextUri:i.uri,isPlayed:a,onMarkAsPlayed:s}),children:(0,j.jsx)(ct.dy,{large:!0,bold:!0,children:(0,j.jsx)(pt.default,{to:b,onClick:P,children:(0,j.jsx)("span",{"data-testid":"showTitle",children:null===(n=i.podcast)||void 0===n?void 0:n.name})})})})]})]})},ht=n(57651),vt=n(75449),xt=function(e){var t,n,a,l,m=e.episode,f=m.uri,y=m.episodeType,h=m.description,v=m.htmlDescription,x=m.podcastSubscription,g=m.segmentsCount,b=m.podcast,P=m.contentInformation,k=m.playedState,C=m.coverArt,T=(0,V.fU)(o.createDesktopEpisodeEventFactory,{data:{uri:f}}),E=T.spec,O=T.logger,S=(0,r.useMemo)((function(){return E.headerFactory()}),[E]),w=(0,r.useMemo)((function(){return E.actionBarFactory()}),[E]),D=(0,r.useState)(k.state===Ke.sY.Completed),N=(0,i.Z)(D,2),L=N[0],R=N[1],U=(0,ze.g)(),M=(0,Fe.o)(),B=(0,s.W6)(Y.Cz),F=void 0!==g&&g>0,A=(0,s.W6)(Y.WE,{loadingValue:!1}),Z=(0,Ne.g)(),z=(0,_e.n)({uri:f},{featureIdentifier:"episode"}),_=z.triggerPlay,q=z.togglePlay,H=z.isPlaying,W=z.isActive,K=(0,qe.$o)(f).isActive,G=C[0].url,J=(0,Ze.Zj)(G||null),X=(0,He.Y)((function(e){var t;return null!==(t=null==e?void 0:e.isPaused)&&void 0!==t?t:void 0})),Q=(0,Re.E)(),$=x.isPaywalled&&!x.isUserSubscribed,ee=K||W,te=m?{name:m.name,uri:m.uri,audio:{items:m.audio.items.map((function(e){return{url:e.url}}))}}:null,ne=b?{name:b.name,uri:b.uri,trailer:b.trailer,showTypes:b.showTypes}:null,ie=(0,Ae.s)(te,ne),re=(0,r.useCallback)((function(e,t,n,i){var r=function(){X?(null==i||i("resume"),U.resume()):(null==i||i("pause"),U.pause())};if(!$){var a="play";if(!H||0!==e&&t||(a="pause"),M({intent:a,targetUri:f,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),y===Ke.Wf.Episode&&Q)p.y.set((function(){return{triggerId:n||Ue,triggerAction:null}}));else if(W&&!t)Z?r():q({loggingParams:null==i?void 0:i()});else if(K&&!t)r();else{var s=null==i?void 0:i("play");Z?ie({seekTo:e,loggingParams:s}):_({seekTo:e,loggingParams:s})}}}),[$,H,M,f,y,Q,K,W,Z,X,U,q,ie,_]),ae=(0,r.useCallback)((function(e){re(e,!1,void 0,(function(e){var t,n=E.actionBarFactory().playButtonFactory();return t="pause"===e||H?n.hitPause({itemToBePaused:f}):"resume"===e||ee?n.hitResume({itemToBeResumed:f}):n.hitPlay({itemToBePlayed:f}),O.logInteraction(t)}))}),[re,ee,H,O,E,f]),se=(0,r.useCallback)((function(e){re(e,!0,void 0,(function(){return O.logInteraction(E.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:f}))}))}),[re,O,E,f]),oe=(0,r.useCallback)((function(e,t){re(e,!0,t,(function(){return O.logInteraction(E.transcriptSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:f}))}))}),[re,O,E,f]),le=(0,r.useCallback)((function(){M({intent:"expand-description",type:"click"})}),[M]);(0,r.useEffect)((function(){if(m&&!ee){var e=new URLSearchParams(location.search);if(e.has("t")){var t=e.get("t")||"0",n=1e3*parseInt(t,10);n<=m.duration.milliseconds&&re(n,!0)}}}),[m,ee]);var ce=!!h||B&&!!v,ue=null===(t=m.podcast)||void 0===t?void 0:t.uri,de=null===(n=(0,c.EC)(ue))||void 0===n?void 0:n.toURLPath(!0);return(0,j.jsxs)("section",{"data-testid":"episode",className:I,children:[(0,j.jsx)(d.$,{children:u.ag.get("podcasts.episode.seo.title",{name:m.name,show:null!==(a=null===(l=m.podcast)||void 0===l?void 0:l.name)&&void 0!==a?a:""})}),(0,j.jsx)(yt,{episode:m,isFullyPlayed:L,setIsFullyPlayed:R,backgroundColor:J,spec:S}),(0,j.jsx)(lt,{episode:m,onPlayEpisode:ae,isPlaying:H,isActive:ee,isFullyPlayed:L,setIsFullyPlayed:R,backgroundColor:J,isLocked:$,spec:w}),(0,j.jsx)("div",{className:"contentSpacing",children:(0,j.jsx)(we,{transcriptEnabled:A,transcript:m.transcript,hasDescription:ce,contentInformation:P,onDescriptionTimestampClick:se,onTranscriptTimestampClick:oe,onExpanded:le,description:m.description,areHTMLDescriptionsEnabled:B,htmlDescription:m.htmlDescription,playability:m.playability,hasMusicAndTalkSegements:F,segmentCount:g,uri:m.uri,showUrl:de,spec:E})})]})};const gt=r.memo((function(){var e,t=(0,a.UO)().episodeId,n=void 0===t?"":t,i=(0,c.YD)(n).toURI(),s=(0,We.I)(i),o=(0,Be.V)("episode",s);return o?(0,j.jsx)(ht.InstrumentedRedirect,{to:o}):s?(0,Ve.Ey)(s)?(0,j.jsx)(ht.InstrumentedRedirect,{to:(0,c.EC)(null===(e=s.book)||void 0===e?void 0:e.uri).toURLPath(!0)}):(0,j.jsx)(r.Suspense,{fallback:null,children:(0,j.jsx)(vt.C,{pageId:l.Wg.PODCAST_EPISODE,uri:i,children:(0,j.jsx)(xt,{episode:s})})}):(0,j.jsx)(m.h,{hasError:!1,errorMessage:u.ag.get("error.not_found.title.podcast")})}));function bt(e){return(null==e?void 0:e.replace(/T.*/,""))||""}},44170:(e,t,n)=>{n.d(t,{E:()=>L,$:()=>I});var i=n(24255),r=n(38698),a=(n(93019),n(28605),n(5629),n(83235)),s=n(52113),o=n(68463),l=n(4090),c=n(5297),u=n(59496);const d="wIA_5Ypq0rltNPeZQpM4",p="Swi6YtNEFCCVz8l4y75v",m="pklLPOhfigdytL9bPoth",f="sb24Y8kdMZInJ8aI8dXT";var y=n(4637);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.Z)(e);if(t){var r=(0,c.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.Z)(this,n)}}var v=function(e){(0,o.Z)(n,e);var t=h(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.ariaValueText,n=e.max,i=e.current,r=n&&i?100*Math.min(1,i/n):0,a={transform:"translateX(-".concat(100-r,"%)")},s=t||"".concat(Math.round(r),"%");return(0,y.jsxs)("div",{className:d,role:"progressbar",tabIndex:0,"aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":n,"aria-valuetext":s,children:[(0,y.jsx)("div",{className:p}),(0,y.jsx)("div",{className:m,children:(0,y.jsx)("div",{"data-testid":"progressBarFg",className:f,style:a})})]})}}]),n}(u.PureComponent);(0,i.Z)(v,"defaultProps",{current:0,max:1});const x=v,g="qfYkuLpETFW3axnfMntO",b="jOd7lbjiyc_kvRJaAbeL",j="_q93agegdE655O5zPz6l",P="z7Yl7CIT1AB0y91f_moh",k="iLIlkUcfIq56KncGtX7u",C="nV50yZ6BR_TIuWP3l7b1",T="qLjIx_SzBEpDRA_q7kxQ";var I,E=n(33892),O=n(67857),S=n(22056),w=n(84875),D=n.n(w),N=n(540);!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(I||(I={}));var L=function(e){var t=e.resumePositionMs,n=void 0===t?0:t,a=e.releaseDate,s=e.isPlaying,o=e.fullyPlayed,l=e.durationMs,c=e.size,u=void 0===c?I.SMALL:c,d=e.position,p=void 0===d?n:d;return(0,y.jsxs)("div",{className:D()(g,(0,i.Z)({},b,u===I.LARGE)),children:[a?(0,y.jsx)(E.D,{as:"p",variant:"mesto",className:j,children:(0,r.rL)((0,r.RX)(a))}):null,function(){if(o&&!s)return(0,y.jsxs)("div",{className:k,children:[(0,y.jsx)(E.D,{as:"p",variant:"mesto",className:P,children:S.ag.get("episode.played")}),(0,y.jsx)(O.N,{iconSize:16,className:T,"aria-hidden":"true"})]});if(p>0||s){var e=Math.ceil(Math.max(l-p,0));return(0,y.jsx)("div",{className:k,children:(0,y.jsx)(E.D,{as:"p",variant:"mesto",className:P,children:(0,y.jsx)(N.ng,{durationMs:e})})})}return(0,y.jsx)(E.D,{as:"p",variant:"mesto",className:j,children:(0,y.jsx)(N.nL,{durationMs:l})})}(),!o&&p>0||s?(0,y.jsx)("div",{className:C,children:(0,y.jsx)(x,{current:p,max:l,isEnabled:!1})}):null]})}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map